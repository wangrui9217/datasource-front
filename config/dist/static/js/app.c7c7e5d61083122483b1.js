webpackJsonp([1],{"0ApM":function(e,t){},"0OYx":function(e,t){},"0kEM":function(e,t){},"1B7q":function(e,t){},"3fOp":function(e,t){},"3wY5":function(e,t){},"6/EL":function(e,t){},"7NKq":function(e,t){},"7Otq":function(e,t){e.exports="data:image/png;base64,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"},BcSr:function(e,t){},DSx3:function(e,t){},E7eo:function(e,t){},EmkW:function(e,t){},GQ7q:function(e,t){},HBSQ:function(e,t){},IUlA:function(e,t){},LsE4:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("MVMM"),i={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view",{attrs:{id:"datasource"}})},staticRenderFns:[]};var r=a("vSla")({name:"datasource"},i,!1,function(e){a("1B7q")},"data-v-6ad720cc",null).exports,s=a("zO6J"),o=a("rVsN"),l=a.n(o),c=a("2sCs"),u=a.n(c),d=a("Axgm"),m=a.n(d),p=(this.development,{baseURL:"/dsIntegration-manager",BASE_FILE_URL:""}.baseURL),h=u.a.create({baseURL:p});h.defaults.timeout=3e4,h.interceptors.request.use(function(e){var t=Oe.history.current;return t.meta.hasOwnProperty("user")&&!0===t.meta.hasOwnProperty("user")?e.headers.Authorization=localStorage.getItem("userAccessToken"):e.headers.Authorization=localStorage.getItem("adminAccessToken"),e},function(e){return d.Message.error({message:"加载超时"}),l.a.reject(e)}),h.interceptors.response.use(function(e){if(403!==e.data.code)return e;d.Message.error({message:"登录失效，请重新登录"})},function(e){try{401===e.response.status?(d.Message.error({message:"登录失效，请重新登录"}),Oe.replace({path:"/userLogin"})):500===e.response.status&&d.Message.error({message:e.response.error}),Oe.replace({path:"/userLogin"})}catch(e){console.log("token过期",e)}return l.a.reject(e)});var g={getCodeUrl:function(){return p+"/api/captcha.jpg"},userLogin:function(e){return h({method:"post",url:"/api/sys/login",params:e})},userInfo:function(){return h({method:"get",url:"/api/sys/user/info"})},menuList:function(e){return h({method:"get",url:"/api/sys/menu/user",params:e})},getOrgList:function(e){return h({method:"get",url:"/api/sys/organization/select",params:e})},getOrgListForSelect:function(e){return h({method:"get",url:"/api/sys/organization/query/organizationInfo",params:e})},saveOrgInfo:function(e){return h({method:"post",url:"/api/sys/organization/save",params:e})},updateOrgInfo:function(e){return h({method:"post",url:"/api/sys/organization/update",params:e})},updateOrgState:function(e){return h({method:"post",url:"/api/sys/organization/updateState",params:e})},deleteOrg:function(e){return h({method:"post",url:"/api/sys/organization/delete",params:e})},getOrgInfoById:function(e){return h({method:"get",url:"/api/sys/organization/selectByPrimaryKey",params:e})},getRoleList:function(e){return h({method:"get",url:"/api/sys/role/select",params:e})},saveRoleInfo:function(e){return h({method:"post",url:"/api/sys/role/save",params:e})},updateRoleInfo:function(e){return h({method:"post",url:"/api/sys/role/update",params:e})},deleteRole:function(e){return h({method:"post",url:"/api/sys/role/delete",params:e})},updateRoleState:function(e){return h({method:"post",url:"/api/sys/role/updateState",params:e})},getRoleInfoById:function(e){return h({method:"get",url:"/api/sys/role/selectEntityByRoleId",params:e})},getUserList:function(e){return h({method:"get",url:"/api/sys/user/select",params:e})},saveUserInfo:function(e){return h({method:"post",url:"/api/sys/user/save",params:e})},updateUserInfo:function(e){return h({method:"post",url:"/api/sys/user/update",params:e})},deleteUser:function(e){return h({method:"post",url:"/api/sys/user/delete",params:e})},updateUserState:function(e){return h({method:"post",url:"/api/sys/user/updateState",params:e})},getUserInfoById:function(e){return h({method:"get",url:"/api/sys/user/selectEntityByUserId",params:e})},getRoleListByOrgId:function(e){return h({method:"get",url:"/api/sys/role/query/roleInfo",params:e})},getMenuList:function(e){return h({method:"get",url:"/api/sys/menu/perms",params:e})},getMenuInfoByMenuId:function(e){return h({method:"get",url:"/api/sys/menu/info/menuId",params:e})},getMenuListByRoleId:function(e){return h({method:"get",url:"/api/sys/menu/info/roleId",params:e})},saveMenuInfo:function(e){return h({method:"post",url:"/api/sys/menu/save",data:e})},deleteMenu:function(e){return h({method:"post",url:"/api/sys/menu/delete",params:e})},updateMenuState:function(e){return h({method:"post",url:"/api/sys/menu/updateState",params:e})},updateMenuInfo:function(e){return h({method:"post",url:"/api/sys/menu/update",data:e})},getMerchantList:function(e){return h({method:"get",url:"/api/biz/merchant/select",params:e})},updateMerchantInfo:function(e){return h({method:"post",url:"/api/biz/merchant/update",params:e})},getMerchantInfoByMerchantId:function(e){return h({method:"get",url:"/api/biz/merchant/selectByPrimaryKey",params:e})},getcategoryList:function(e){return h({method:"get",url:"/api/biz/category/select",params:e})},getInterfaceList:function(e){return h({method:"get",url:"/api/biz/interface/selectIntefaceList",params:e})},getInterfaceDetail:function(e){return h({method:"get",url:"/api/biz/interface/selectByPrimaryKey",params:e})},moveInterface:function(e){return h({method:"post",url:"/api/biz/interface/move",params:e})},getSysLogList:function(e){return h({method:"get",url:"/api/sys/log/select",params:e})},getFieldList:function(e){return h({method:"get",url:"/api/biz/field/select",params:e})},getQueryRequestFields:function(e){return h({method:"get",url:"/api/biz/field/queryRequestFields",params:e})},moveFields:function(e){return h({method:"post",url:"/api/biz/field/move",params:e})},updateFields:function(e){return h({method:"post",url:"/api/biz/field/updateState",params:e})},getSelectTypeList:function(e){return h({method:"get",url:"/api/biz/category/select",params:e})},addSelectTypeList:function(e){return h({method:"post",url:"/api/biz/category/save",params:e})},deleteSelectTypeList:function(e){return h({method:"post",url:"/api/biz/category/delete",params:e})},moveSelectTypeList:function(e){return h({method:"post",url:"/api/biz/category/move",params:e})},updateSelectTypeList:function(e){return h({method:"post",url:"/api/biz/category/updateName",params:e})},getDataServiceList:function(e){return h({method:"get",url:"/api/biz/service/list",params:e})},selectByServiceId:function(e){return h({method:"get",url:"/api/biz/service/selectByServiceId",params:e})},updateDataServiceState:function(e){return h({method:"post",url:"/api/biz/service/updateState",params:e})},testDataServiceState:function(e){return h({method:"get",url:"/api/biz/service/testService",params:e})},updateDataServiceList:function(e){return h({method:"post",url:"/api/biz/service/update",data:e})},addDataServiceList:function(e){return h({method:"post",url:"/api/biz/service/save",data:e})},deleteDataServiceList:function(e){return h({method:"post",url:"/api/biz/service/delete",params:e})},moveDataServiceList:function(e){return h({method:"post",url:"/api/biz/service/move",params:e})},getDataServiceUrl:function(e){return h({method:"get",url:"/api/biz/service/getUrl",params:e})},getServiceRedord:function(e){return h({method:"get",url:"/api/biz/serviceRecord/list",params:e})},getServiceRedordById:function(e){return h({method:"get",url:"/api/biz/serviceRecord/selectById",params:e})}},f={uuidfn:function(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},getIcon:function(e){return".pdf"==e.substring(e.lastIndexOf(".")).toLowerCase()?Pdf:Word},subtr:function(e,t){var a,n,i;try{a=e.toString().split(".")[1].length}catch(e){a=0}try{n=t.toString().split(".")[1].length}catch(e){n=0}return((e*(i=Math.pow(10,Math.max(a,n)))-t*i)/i).toFixed(a>=n?a:n)},exchangeIndex:function(e){e=""+e;for(var t=new Array("零","一","二","三","四","五","六","七","八","九"),a=new Array,n=e.split(""),i=0;i<n.length;i++)a[i]=t[n[i]];return a.join("")},formatTime:function(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t},prefixInteger:function(e,t){return(Array(t).join("0")+e).slice(-t)},timestampToTime:function(e){return new Date(parseInt(e)).toLocaleString().replace(/:\d{1,2}$/," ")}},v={data:function(){return{refreshImgCode:0,loginForm:{username:"",pwd:"",verificationCode:"",remember:!1},loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],pwd:[{required:!0,message:"请输入密码",trigger:"blur"}],verificationCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},buttonLoading:!1,captchaUrl:"",uuid:""}},methods:{refreshCode:function(){this.refreshImgCode=this.refreshImgCode+1,this.captchaUrl=g.getCodeUrl()+"?refreshImgCode="+this.refreshImgCode},submitForm:function(){var e=this;""==this.loginForm.username?this.$message.error("请填写用户名"):""==this.loginForm.pwd?this.$message.error("请填写密码"):""==this.loginForm.verificationCode?this.$message.error("请填写验证码"):(this.buttonLoading=!0,g.userLogin({username:this.loginForm.username,password:this.loginForm.pwd,captcha:this.loginForm.verificationCode}).then(function(t){e.buttonLoading=!1,0==t.data.code?g.userInfo().then(function(t){localStorage.setItem("adminMobile",t.data.user.mobile),localStorage.setItem("adminName",t.data.user.username),localStorage.setItem("organizationId",t.data.user.organizationId),e.$router.push({path:"admin/home"})}):(e.refreshCode(),e.$message.error(t.data.msg))}))}},getMenu:function(){var e=this;g.menulist().then(function(t){0===t.data.code?e.menulist=t.data.data:e.$message.error(t.data.msg)})},mounted:function(){this.refreshCode()}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"main-content",attrs:{type:"flex",justify:"center",align:"middle"}},[a("el-row",{staticClass:"login-box",attrs:{gutter:20,type:"flex",justify:"center",align:"middle"}},[a("el-col",{attrs:{span:24}},[a("p",{staticClass:"g-logo"},[e._v("数据源平台")]),e._v(" "),a("el-card",[a("p",{staticClass:"logo-center"},[e._v("欢迎登录")]),e._v(" "),a("el-form",{attrs:{model:e.loginForm,rules:e.loginRules}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username","string"==typeof t?t.trim():t)},expression:"loginForm.username"}},[a("i",{staticClass:"fa fa-user-o login_icon",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("el-form-item",{attrs:{prop:"pwd"}},[a("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.loginForm.pwd,callback:function(t){e.$set(e.loginForm,"pwd",t)},expression:"loginForm.pwd"}},[a("i",{staticClass:"fa fa-lock fa-lg login_icon",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),a("el-form-item",{attrs:{prop:"verificationCode"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"验证码"},nativeOn:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.submitForm()}},model:{value:e.loginForm.verificationCode,callback:function(t){e.$set(e.loginForm,"verificationCode","string"==typeof t?t.trim():t)},expression:"loginForm.verificationCode"}},[a("i",{staticClass:"fa fa-unlock-alt fa-lg login_icon2 login_icon",attrs:{slot:"prefix"},slot:"prefix"}),e._v(" "),a("template",{slot:"append"},[e.captchaUrl?a("img",{staticClass:"codeImg",attrs:{src:e.captchaUrl,alt:"图形验证码"},on:{click:function(t){e.refreshCode()}}}):e._e()])],2)],1),e._v(" "),a("el-form-item",{attrs:{prop:"remember"}},[a("el-row",[a("el-col",{attrs:{align:"middle"}},[a("el-button",{staticClass:"form-button",class:{loginbtn:!0},attrs:{type:"primary",size:"medium",loading:e.buttonLoading},on:{click:function(t){e.submitForm()}}},[e._v("登录")])],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var y=a("vSla")(v,b,!1,function(e){a("IUlA")},null,null).exports,_={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view")],1)},staticRenderFns:[]};var S=a("vSla")({data:function(){return{}}},_,!1,function(e){a("xOIx")},"data-v-27c8d3ca",null).exports,I={data:function(){return{menulist:[],msgNum:0,msgRedShow:!1,user_fullname:""}},methods:{msgUnread:function(){var e=this;g.queryMessageListByType({pageSize:10,type:2,pageNo:1}).then(function(t){if("1"==t.data.code){var a=t.data.data;(a.hasOwnProperty("list")?a.list.length:0)>0&&(e.msgRedShow=!0)}})},change:function(e){this.msgRedShow=e},logout:function(){this.$router.push({path:"/userLogin"})},getMenu:function(){var e=this;g.menuList().then(function(t){0===t.data.code?e.menulist=t.data.menuList:e.$message.error(t.data.msg)})},goMsg:function(){this.$router.push({path:"/admin/manage/adminMsg"})}},mounted:function(){this.user_fullname=localStorage.getItem("adminName"),this.getMenu()}},C={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",[n("el-row",[n("el-col",{attrs:{span:4}},[n("div",{staticClass:"logo"},[n("img",{attrs:{src:a("7Otq")}}),e._v("数据源")])]),e._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8,offset:12}},[n("div",{staticClass:"btnwork"},[n("el-popover",{ref:"popover",attrs:{placement:"bottom",width:"400",trigger:"manual"}},[n("label",[e._v("YYYYYY")])]),e._v(" "),n("span",{staticStyle:{"margin-right":"15px"}},[e._v("欢迎登陆，"),n("label",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}]},[e._v(e._s(e.user_fullname))])]),e._v(" "),n("a",{staticStyle:{cursor:"pointer"},on:{click:function(t){return t.preventDefault(),e.logout(t)}}},[n("i",{staticClass:"fa fa-power-off",attrs:{"aria-hidden":"true"}}),e._v("退出")])],1)])],1)],1),e._v(" "),n("el-container",[n("el-aside",{staticStyle:{"background-color":"#22345E"},attrs:{width:"200px"}},[n("el-menu",{staticClass:"g-el-menu",attrs:{"text-color":"#fff",router:!0,"default-active":e.$route.path}},e._l(e.menulist,function(t){return n("div",[0==t.type?n("el-submenu",{attrs:{index:""+t.menuId}},[n("template",{slot:"title"},[n("i",{class:t.icon}),e._v(" "),n("span",[e._v(e._s(t.name))])]),e._v(" "),e._l(t.list,function(t){return n("div",[0==t.type?n("el-submenu",{attrs:{index:""+t.menuId}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-location"}),e._v(" "),n("span",[e._v(e._s(t.name))])]),e._v(" "),e._l(t.list,function(t){return n("div",[0==t.type?n("el-submenu",{attrs:{index:""+t.menuId}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-location"}),e._v(" "),n("span",[e._v(e._s(t.name))])])],2):e._e(),e._v(" "),1==t.type?n("el-menu-item",{key:t.menuId,attrs:{index:t.url}},[n("template",{slot:"title"},[e._v(e._s(t.name))])],2):e._e()],1)})],2):e._e(),e._v(" "),1==t.type?n("el-menu-item",{key:t.menuId,attrs:{index:t.url}},[n("template",{slot:"title"},[e._v(e._s(t.name))])],2):e._e()],1)})],2):e._e(),e._v(" "),1==t.type?n("el-menu-item",{key:t.menuId,attrs:{index:t.url}},[n("template",{slot:"title"},[e._v(e._s(t.name))])],2):e._e()],1)}))],1),e._v(" "),n("el-main",{staticClass:"admin_main"},[n("router-view",{on:{upup:e.change}})],1)],1)],1)},staticRenderFns:[]};var x=a("vSla")(I,C,!1,function(e){a("fLt+")},"data-v-7e55d7fc",null).exports,k={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticStyle:{"text-align":"center",height:"400px","line-height":"400px"}},[t("p",[this._v("敬请期待...")])])])}]};var N=a("vSla")({data:function(){return{}},methods:{},created:function(){},mounted:function(){}},k,!1,function(e){a("Wh4y")},"data-v-48154dac",null).exports;function w(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var n in a)if(new RegExp("("+n+")").test(t)){var i=a[n]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?i:z(i))}return t}function z(e){return("00"+e).substr(e.length)}var F={data:function(){return{isHaveSelected:!1,formLabelWidth:"120px",dialogTitle:"",loading:!1,date:"",total:0,pageSize:10,pageNo:1,tableData:[],title:"新增",arbFormulaInfo:null,searchForm:{inputs:""},multipleSelection:[],selectDicValue:"",pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()}}}},methods:{indexMethod:function(e){return this.pageSize*(this.pageNo-1)+e+1},handleSelectionChange:function(e){0==e.length?this.isHaveSelected=!1:this.isHaveSelected=!0,this.multipleSelection=e},pageSizeChange:function(e){this.pageSize=e,this.getOrgList()},pageNoChange:function(e){this.pageNo=e,this.getOrgList()},dicSelsctChange:function(e){console.log(e)},addOrg:function(){this.$router.push({path:"/admin/settings/orgEdit/add"})},editOrgInfo:function(e){this.$router.push({path:"/admin/settings/orgEdit/"+e.organizationId})},deleteFuc:function(){var e=this,t=[];t=this.multipleSelection.map(function(e){return e.organizationId});this.$confirm("确认删除已选的组织？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){g.deleteOrg({organizationIds:t.join(",")}).then(function(t){0===t.data.code?(e.$message.success("删除成功！"),e.$refs.table.clearSelection(),e.getOrgList()):e.$message.error(t.data.msg)})}).catch(function(){})},updateStatus:function(e){var t=this,a=[];a=this.multipleSelection.map(function(e){return e.organizationId});var n=1==e?"确认启用已选的组织？":"确认停用已选的组织";this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){g.updateOrgState({organizationIds:a.join(","),status:e}).then(function(a){0===a.data.code?(t.$message.success(1==e?"启用成功！":"停用成功！"),t.$refs.table.clearSelection(),t.getOrgList()):t.$message.error(a.data.msg)})}).catch(function(){})},getOrgList:function(){var e=this;g.getOrgList({page:this.pageNo,limit:this.pageSize,organizationName:this.searchForm.inputs}).then(function(t){if(0==t.data.code){var a=t.data.page.list;a&&a.forEach(function(e){e.status=1==e.status?"启用":"停用";var t=new Date(e.updateTime);e.updateTime=w(t,"yyyy-MM-dd hh:mm:ss")}),e.tableData=a,e.total=t.data.page.totalCount}else e.tableData=[],e.total=0})},searchFn:function(){this.pageNo=1,this.getOrgList()}},created:function(){this.getOrgList()},mounted:function(){}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"g-listpage__style"},[a("div",{staticClass:"action-btn-container.space-inner"},[a("div",{staticClass:"input-group"},[a("el-input",{staticClass:"right search-btn",attrs:{placeholder:"请输入关键词"},model:{value:e.searchForm.inputs,callback:function(t){e.$set(e.searchForm,"inputs","string"==typeof t?t.trim():t)},expression:"searchForm.inputs"}},[a("i",{staticClass:"iconfont-search el-input__icon",staticStyle:{"vertical-align":"middle"},attrs:{slot:"suffix"},on:{click:e.searchFn},slot:"suffix"})])],1),e._v(" "),a("div",{staticClass:"right-top"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addOrg}},[a("span",[e._v("+ 新增机构")])]),e._v(" "),a("el-button",{attrs:{disabled:!this.isHaveSelected},on:{click:function(t){e.deleteFuc()}}},[a("i",{staticClass:"iconfont-remove-color",class:{"icon-disable":!this.isHaveSelected}}),e._v(" "),a("span",[e._v("删除")])]),e._v(" "),a("el-button",{attrs:{disabled:!this.isHaveSelected},on:{click:function(t){e.updateStatus(1)}}},[a("i",{staticClass:"iconfont-start-color",class:{"icon-disable":!this.isHaveSelected}}),e._v(" "),a("span",[e._v("启用")])]),e._v(" "),a("el-button",{attrs:{disabled:!this.isHaveSelected},on:{click:function(t){e.updateStatus(0)}}},[a("i",{staticClass:"iconfont-stop-color",class:{"icon-disable":!this.isHaveSelected}}),e._v(" "),a("span",[e._v("停用")])])],1)]),e._v(" "),a("el-table",{ref:"table",staticClass:"g-table",attrs:{data:e.tableData,border:"","row-key":"organizationId"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"37","reserve-selection":!0}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"organizationName",label:"机构名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"organizationCode",label:"机构代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tokenKey",label:"TOKEN-KEY"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"启用状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateName",label:"更新人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"actions"},[a("button",{on:{click:function(a){e.editOrgInfo(t.row)}}},[e._v("修改")])])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"middle"},attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,40],"page-size":10,layout:"prev, pager, next, jumper,total, sizes",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageNoChange}})],1)},staticRenderFns:[]};var T=a("vSla")(F,D,!1,function(e){a("c/B/")},"data-v-4965b906",null).exports,L=a("aA9S"),$=a.n(L),M=a("a3Yh"),R=a.n(M),E=R()({phoneRule:[{required:!0,trigger:"blur",message:"请填写手机号"},{pattern:/^1\d{10}$/,trigger:"blur",message:"手机号码错误"}],passwordRule:{required:!0,trigger:"blur",message:"请填写密码"},organizationRule:{required:!0,trigger:"blur",message:"请选择组织"},roleIdRule:{required:!0,trigger:"blur",message:"请选择角色"},menuTypeRule:{required:!0,trigger:"blur",message:"请选择菜单类型"},parentIdRule:{required:!0,trigger:"blur",message:"请选择父级菜单"},realnameRule:[{required:!0,trigger:"blur",message:"请填写姓名"},{max:20,message:"20个字符以内",trigger:"blur"}],emailRule:[{required:!1,trigger:"blur",message:"请填写邮箱"},{type:"email",message:"邮箱格式错误，请录入正确的邮箱",trigger:"blur"},{max:100,message:"100个字符以内",trigger:"blur"}],orgRemarkRule:[{required:!1,trigger:"blur",message:"请填写备注"},{max:500,message:"500个字符以内",trigger:"blur"}],roleRemarkRule:[{required:!1,trigger:"blur",message:"请填写备注"},{max:500,message:"500个字符以内",trigger:"blur"}],menuNameRule:[{required:!0,trigger:"blur",message:"请填菜单名称"},{max:20,message:"20个字符以内",trigger:"blur"}],roleNameRule:[{required:!0,trigger:"blur",message:"请填角色名称"},{max:40,message:"40个字符以内",trigger:"blur"}],orgNameRule:[{required:!0,trigger:"blur",message:"请填组织名称"},{max:40,message:"40个字符以内",trigger:"blur"}],orgCodeRule:[{required:!0,trigger:"blur",message:"请填组织代码"},{max:20,message:"20个字符以内",trigger:"blur"}],merchantContactNameRule:[{required:!0,trigger:"blur",message:"请填写对接人"},{max:50,message:"50个字符以内",trigger:"blur"}],merchantShortened:[{required:!1,trigger:"blur",message:"请填写商户简称"},{max:50,message:"50个字符以内",trigger:"blur"}],merchantContactQq:[{required:!1,trigger:"blur",message:"请填Qq"},{max:50,message:"50个字符以内",trigger:"blur"}],merchantContactWechat:[{required:!1,trigger:"blur",message:""},{max:100,message:"100个字符以内",trigger:"blur"}],merchantUrl:[{required:!1,trigger:"blur",message:"请填写商戶網址"},{max:300,message:"300个字符以内",trigger:"blur"}]},"merchantContactNameRule",[{required:!0,trigger:"blur",message:"请填写对接人"},{max:50,message:"50个字符以内",trigger:"blur"}]),q={data:function(){return{rules:E,backPath:"/admin/settings/orgManage",organ:{organizationId:"",organizationName:"",organizationCode:"",tokenKey:"",isdelete:"",email:"",status:1,telephone:"",token:"",remark:""},copiedOrganName:"",copiedOrganCode:"",organRules:{},timeout:null}},methods:{quit:function(){this.$router.push(this.backPath)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.doneSave()})},doneSave:function(){var e=this,t=$()({},this.organ);this.organ.organizationId?g.updateOrgInfo({organizationName:this.organ.organizationName,organizationId:this.organ.organizationId,organizationCode:this.organ.organizationCode,remark:this.organ.remark}).then(function(t){0==t.data.code?(e.$message.success("保存成功！"),e.$router.push(e.backPath)):e.$message.error(t.data.msg)},function(e){ResponseUtils.showErrorMessage(e,"组织保存失败")}):(delete t.organizationId,g.saveOrgInfo(t).then(function(t){0==t.data.code?(e.$message.success("保存成功！"),e.$router.push(e.backPath)):e.$message.error(t.data.msg)},function(e){ResponseUtils.showErrorMessage(e,"组织保存失败")}))},checkOrgan:function(e,t,a){var n=this;n.organ.organizationId&&t===n.copiedOrganName?a():g.exitName(t,"add"!==n.$route.params.id?n.$route.params.id:"").then(function(e){e.data&&t!==n.copiedOrganName?a(new Error("该组织名称已经存在，请重新输入")):a()},function(e){console.log(e),a()})},checkOrganCode:function(e,t,a){this.organ.organizationId&&t===this.copiedOrganCode?a():g.isHasOrganCode(t,"add"===this.$route.params.id?"":this.$route.params.id).then(function(e){e.data?a(new Error("该组织代号已经存在，请重新输入")):a()},function(e){console.log(e),a()})}},created:function(){var e=this;this.organ.organizationId="add"!==this.$route.params.id?this.$route.params.id:"",this.organ.organizationId&&g.getOrgInfoById({organizatioId:this.organ.organizationId}).then(function(t){0==t.data.code&&(e.organ=t.data.list,e.organ.organizationId=e.organ.organizationId.toString(),e.copiedOrganName=e.organ.organizationName,e.copiedOrganCode=e.organ.organizationCode)},function(t){console.log(t),e.$message.error("组织信息加载失败")})}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"edit-organ-info"}},[a("div",{staticClass:"edit-info-top"},[a("el-row",[a("div",{staticStyle:{"margin-left":"20px",width:"50px",float:"left"}},[a("span",{staticStyle:{color:"#20a0ff",cursor:"pointer"},on:{click:e.quit}},[e._v("<")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.quit}},[e._v("返回")])],1),e._v(" "),a("div",{staticStyle:{width:"80px",float:"left","line-height":"34px","margin-left":"30px",color:"#48576a"}},[a("span",[e._v("组织管理")])]),e._v(" "),a("div",{staticStyle:{float:"right","margin-right":"20px"}},[a("el-button",{staticClass:"right",attrs:{size:"small"},on:{click:function(t){e.submitForm("organ")}}},[e._v("保存")])],1)])],1),e._v(" "),a("div",{staticClass:"edit-info-bottom",attrs:{id:"edit-organ"}},[a("el-form",{ref:"organ",attrs:{"label-width":"80px",model:e.organ}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"名称",prop:"organizationName",rules:e.rules.orgNameRule}},[a("el-input",{model:{value:e.organ.organizationName,callback:function(t){e.$set(e.organ,"organizationName",t)},expression:"organ.organizationName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"代号",prop:"organizationCode",rules:e.rules.orgCodeRule}},[a("el-input",{model:{value:e.organ.organizationCode,callback:function(t){e.$set(e.organ,"organizationCode",t)},expression:"organ.organizationCode"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:14,row:30}},[a("el-form-item",{attrs:{label:"备注:",prop:"remark",rules:e.rules.orgRemarkRule}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:4}},model:{value:e.organ.remark,callback:function(t){e.$set(e.organ,"remark",t)},expression:"organ.remark"}})],1)],1)],1)],1)],1)])},staticRenderFns:[]};var A=a("vSla")(q,P,!1,function(e){a("YZ26"),a("VhOZ")},"data-v-1190a8e0",null).exports,O={data:function(){return{menuTreeProps:{label:"name"},selectedKeys:[],menuList:[],isHaveSelected:!1,formLabelWidth:"120px",dialogTitle:"",dialogFormVisible:!1,loading:!1,date:"",total:0,pageSize:10,pageNo:1,tableData:[],title:"新增",arbFormulaInfo:null,dialogForm:{roleName:"",roleId:"",remark:""},searchForm:{roleName:"",inputs:""},multipleSelection:[]}},methods:{handleSelectionChange:function(e){0==e.length?this.isHaveSelected=!1:this.isHaveSelected=!0,this.multipleSelection=e},indexMethod:function(e){return this.pageSize*(this.pageNo-1)+e+1},pageSizeChange:function(e){this.pageSize=e,this.getRoleList()},pageNoChange:function(e){this.pageNo=e,this.getRoleList()},dicSelsctChange:function(e){console.log(e)},offTree:function(){for(var e=0;e<this.$refs.tree.store._getAllNodes().length;e++)this.$refs.tree.store._getAllNodes()[e].expanded=!1},dialogClose:function(){this.selectedKeys=[],this.$refs.tree&&(this.$refs.tree.setCheckedKeys(this.selectedKeys),this.offTree())},addFuc:function(){this.$router.push({path:"/admin/settings/roleEdit/add"})},openEditbox:function(e){this.$router.push({path:"/admin/settings/roleEdit/"+e.roleId})},deleteFuc:function(){var e=this,t=[];t=this.multipleSelection.map(function(e){return e.roleId});this.$confirm("确认删除已选的角色？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){g.deleteRole({roleIds:t.join(",")}).then(function(t){0===t.data.code?(e.$message.success("删除成功！"),e.$refs.table.clearSelection(),e.getRoleList()):e.$message.error(t.data.msg)})}).catch(function(){})},updateStatus:function(e){var t=this,a=[];a=this.multipleSelection.map(function(e){return e.roleId});var n=1==e?"确认启用已选的角色？":"确认停用已选的角色";this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){g.updateRoleState({roleIds:a.join(","),status:e}).then(function(a){0===a.data.code?(t.$message.success(1==e?"启用成功！":"停用成功！"),t.$refs.table.clearSelection(),t.getRoleList()):t.$message.error(a.data.msg)})}).catch(function(){})},saveRoleInfo:function(){var e=this,t=!this.dialogForm.roleId;this.selectedKeys=this.$refs.tree.getCheckedKeys();var a=this.$refs.tree.getHalfCheckedKeys();for(var n in a)this.selectedKeys.push(a[n]);if(""==this.dialogForm.roleName)this.$message.warning("请输入角色名称");else if(""==this.dialogForm.remark)this.$message.warning("请输入备注");else if(0==this.selectedKeys.length)this.$message.warning("请选择授权");else if(t){console.log("MeYang",this.selectedKeys);var i=$()({remark:this.dialogForm.remark,roleName:this.dialogForm.roleName,menuIdList:this.selectedKeys});this.loading=!0,g.saveRoleInfo(i).then(function(t){e.loading=!1,0===t.data.code?(e.$message.success("保存成功！"),e.getRoleList()):e.$message.error(t.data.msg)}),this.dialogFormVisible=!1}else{var r=$()({roleId:this.dialogForm.roleId,remark:this.dialogForm.remark,roleName:this.dialogForm.roleName,menuIdList:this.selectedKeys});this.loading=!0,g.updateRoleInfo(r).then(function(t){e.loading=!1,0===t.data.code?(e.$message.success("保存成功！"),e.getRoleList()):e.$message.error(t.data.msg)}),this.dialogFormVisible=!1}},getRoleList:function(){var e=this;g.getRoleList({page:this.pageNo,limit:this.pageSize,roleName:this.searchForm.inputs}).then(function(t){if(0==t.data.code){var a=t.data.page.list;a&&a.forEach(function(e){e.status=1==e.status?"启用":"停用",e.isAssignAutho=1==e.isAssignAutho?"已分配":"未分配";var t=new Date(e.updateTime);e.updateTime=w(t,"yyyy-MM-dd hh:mm:ss")}),e.tableData=a,e.total=t.data.page.totalCount}else e.tableData=[],e.total=0})},searchFn:function(){this.pageNo=1,this.getRoleList()}},created:function(){this.getRoleList()},mounted:function(){}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"g-listpage__style"},[a("div",{staticClass:"action-btn-container.space-inner"},[a("div",{staticClass:"input-group"},[a("el-input",{staticClass:"right search-btn",attrs:{placeholder:"请输入关键词"},model:{value:e.searchForm.inputs,callback:function(t){e.$set(e.searchForm,"inputs","string"==typeof t?t.trim():t)},expression:"searchForm.inputs"}},[a("i",{staticClass:"iconfont-search el-input__icon",staticStyle:{"vertical-align":"middle"},attrs:{slot:"suffix"},on:{click:e.searchFn},slot:"suffix"})])],1),e._v(" "),a("div",{staticClass:"right-top"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addFuc}},[a("span",[e._v("+ 新增")])]),e._v(" "),a("el-button",{attrs:{disabled:!this.isHaveSelected},on:{click:function(t){e.deleteFuc()}}},[a("i",{staticClass:"iconfont-remove-color",class:{"icon-disable":!this.isHaveSelected}}),e._v(" "),a("span",[e._v("删除")])]),e._v(" "),a("el-button",{attrs:{disabled:!this.isHaveSelected},on:{click:function(t){e.updateStatus(1)}}},[a("i",{staticClass:"iconfont-start-color",class:{"icon-disable":!this.isHaveSelected}}),e._v(" "),a("span",[e._v("启用")])]),e._v(" "),a("el-button",{attrs:{disabled:!this.isHaveSelected},on:{click:function(t){e.updateStatus(0)}}},[a("i",{staticClass:"iconfont-stop-color",class:{"icon-disable":!this.isHaveSelected}}),e._v(" "),a("span",[e._v("停用")])])],1)]),e._v(" "),a("el-table",{ref:"table",staticClass:"g-table",attrs:{data:e.tableData,border:"","row-key":"roleId"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"37","reserve-selection":!0}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"organizationName",label:"机构名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isAssignAutho",label:"权限分配状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"启用状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateName",label:"更新人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"actions"},[a("button",{on:{click:function(a){e.openEditbox(t.row)}}},[e._v("修改")])])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"middle"},attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,40],"page-size":10,layout:"prev, pager, next, jumper,total, sizes",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageNoChange}}),e._v(" "),a("el-dialog",{attrs:{title:this.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.dialogClose}},[a("el-form",{attrs:{model:e.dialogForm}},[a("el-form-item",{attrs:{label:"角色名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dialogForm.roleName,callback:function(t){e.$set(e.dialogForm,"roleName",t)},expression:"dialogForm.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dialogForm.remark,callback:function(t){e.$set(e.dialogForm,"remark",t)},expression:"dialogForm.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"授权","label-width":e.formLabelWidth}},[a("el-tree",{ref:"tree",attrs:{data:e.menuList,props:e.menuTreeProps,checkedKeys:e.selectedKeys,"default-checked-keys":e.selectedKeys,"default-expanded-keys":e.selectedKeys,"node-key":"menuId","show-checkbox":""},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleInfo}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var H=a("vSla")(O,K,!1,function(e){a("6/EL")},"data-v-76c81bd4",null).exports,U=a("qsPZ"),V=a.n(U),B={data:function(){return{isDisabled:!1,rules:E,backPath:"/admin/settings/roleManage",menuTreeProps:{label:"name"},selectedKeys:[],menuList:[],user:{realname:"",mobile:"",organizationId:null,roleId:null,username:"",email:"",remark:"",status:1},role:{roleId:"",roleName:"",organizationId:"",roleCode:"",roleDesc:"",menuIds:"",author:"",birth:"",status:1,remark:""},copiedOrganId:"",currentPath:"",timeout:null,roleRules:{},companies:[],ifAdmin:!0,ifOrganHasRecord:!1,copiedRoleName:""}},watch:{},methods:{quit:function(){this.$router.push(this.backPath)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&!t.ifOrganHasRecord&&t.doneSaveOrUpdate()})},validateOrgan:function(e,t,a){this.copiedOrganId&&this.copiedOrganId===this.role.organizationId&&(this.ifOrganHasRecord=!1)},getMenuList:function(){var e=this;g.getMenuList({page:1,limit:-1}).then(function(t){0==t.data.code&&(e.menuList=V()(t.data.list,{parentProperty:"parentId",customID:"menuId"}))})},doneSaveOrUpdate:function(){var e=this;this.selectedKeys=this.$refs.tree.getCheckedKeys();var t=this.$refs.tree.getHalfCheckedKeys();for(var a in t)this.selectedKeys.push(t[a]);this.role.menuIds=this.selectedKeys.join(",");var n=$()({},this.role);this.role.roleId?g.updateRoleInfo(n).then(function(t){0==t.data.code?(e.$message.success("保存成功！"),e.$router.push(e.backPath)):e.$message.error(t.data.msg)},function(e){ResponseUtils.showErrorMessage(e,"角色保存失败")}):(delete n.roleId,g.saveRoleInfo(n).then(function(t){0==t.data.code?(e.$message.success("保存成功！"),e.$router.push(e.backPath)):e.$message.error(t.data.msg)},function(e){ResponseUtils.showErrorMessage(e,"角色保存失败")}))}},created:function(){var e=this;this.getMenuList(),"add"!==this.$route.params.id&&(this.currentPath="editRole"),localStorage&&localStorage.getItem("admin_name")&&"admin"===localStorage.getItem("admin_name")&&(this.ifAdmin=!0),this.role.roleId="add"!==this.$route.params.id?this.$route.params.id:"",g.getOrgListForSelect().then(function(t){e.companies=t.data.list,e.companies.forEach(function(e){e.disabled=1!=e.status})},function(){}),"add"!=this.role.roleId&&""!=this.role.roleId?(this.isDisabled=!0,g.getRoleInfoById({roleId:this.role.roleId}).then(function(t){e.role=t.data.list,e.copiedOrganId=e.role.organizationId,e.role.organizationId=data.organizationId.toString()},function(t){console.log(t),e.$message.error("角色信息加载失败")}),g.getMenuListByRoleId({roleId:this.role.roleId}).then(function(t){if(0==t.data.code){var a=t.data.menu.map(function(e){if(0!=e.parentId)return e.menuId});e.selectedKeys=a,e.$refs.tree.setCheckedKeys(e.selectedKeys)}else e.$message.error(t.data.msg)},function(t){console.log(t),e.$message.error("角色信息加载失败")})):(this.role.organizationId=localStorage.getItem("organizationId"),"admin"!=localStorage.getItem("adminName")&&(this.isDisabled=!0))}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"edit-info"}},[a("div",{staticClass:"edit-info-top"},[a("el-row",[a("div",{staticStyle:{"margin-left":"20px",width:"50px",float:"left"}},[a("span",{staticStyle:{color:"#20a0ff",cursor:"pointer"},on:{click:e.quit}},[e._v("<")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.quit}},[e._v("返回")])],1),e._v(" "),a("div",{staticStyle:{width:"80px",float:"left","margin-left":"30px",color:"#48576a",padding:"5px"}},[a("span",[e._v("角色管理")])]),e._v(" "),a("div",{staticStyle:{float:"right","margin-right":"20px",padding:"5px"}},[a("el-button",{staticClass:"right",attrs:{size:"small"},on:{click:function(t){e.submitForm("role")}}},[e._v("保存")])],1)])],1),e._v(" "),a("div",{staticClass:"edit-info-bottom",attrs:{id:"edit-role"}},[a("el-form",{ref:"role",attrs:{"label-width":"80px",model:e.role}},[a("el-row",{staticClass:"row-bg",attrs:{gutter:20,type:"flex",justify:"left"}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"角色名",prop:"roleName",rules:e.rules.roleNameRule}},[a("el-input",{model:{value:e.role.roleName,callback:function(t){e.$set(e.role,"roleName",t)},expression:"role.roleName"}})],1)],1),e._v(" "),[a("el-col",{attrs:{span:7}},[a("el-form-item",{class:{"is-error":e.ifOrganHasRecord},attrs:{label:"组织",prop:"organizationId",rules:e.rules.organizationRule}},[a("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择"},on:{change:e.validateOrgan},model:{value:e.role.organizationId,callback:function(t){e.$set(e.role,"organizationId",t)},expression:"role.organizationId"}},e._l(e.companies,function(e){return a("el-option",{key:e.organizationId,attrs:{label:e.organizationName,disabled:e.disabled,value:e.organizationId}})})),e._v(" "),e.ifOrganHasRecord?[a("div",{staticClass:"el-form-item__error"},[e._v("\n                  已为该组织创建角色，请更换组织\n                ")])]:e._e()],2)],1)]],2),e._v(" "),a("el-row",[a("el-col",{attrs:{span:14,row:30}},[a("el-form-item",{attrs:{label:"备注:",prop:"remark",rules:e.rules.roleRemarkRule}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:4}},model:{value:e.role.remark,callback:function(t){e.$set(e.role,"remark",t)},expression:"role.remark"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:14,row:30}},[a("el-form-item",{attrs:{label:"权限:",prop:"promise"}},[a("el-tree",{ref:"tree",attrs:{data:e.menuList,props:e.menuTreeProps,checkedKeys:e.selectedKeys,"default-checked-keys":e.selectedKeys,"default-expanded-keys":e.selectedKeys,"node-key":"menuId","show-checkbox":""},model:{value:e.selectedKeys,callback:function(t){e.selectedKeys=t},expression:"selectedKeys"}})],1)],1)],1)],1)],1)])},staticRenderFns:[]};var Q=a("vSla")(B,j,!1,function(e){a("3fOp")},null,null).exports,J={data:function(){return{companies:[],roles:[],isHaveSelected:!1,formLabelWidth:"120px",dialogTitle:"",loading:!1,date:"",total:0,pageSize:10,pageNo:1,tableData:[],title:"新增",arbFormulaInfo:null,searchForm:{inputs:"",organizationId:"",roleId:""},multipleSelection:[],selectDicValue:"",pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()}}}},methods:{handleSelectionChange:function(e){0==e.length?this.isHaveSelected=!1:this.isHaveSelected=!0,this.multipleSelection=e},indexMethod:function(e){return this.pageSize*(this.pageNo-1)+e+1},pageSizeChange:function(e){this.pageSize=e,this.getUserList()},pageNoChange:function(e){this.pageNo=e,this.getUserList()},dicSelsctChange:function(e){console.log(e)},changeOrgan:function(e){var t=this;e&&!0===e||(this.searchForm.roleId=""),this.searchForm.roleId="",g.getRoleListByOrgId({organizationId:this.searchForm.organizationId}).then(function(e){t.roles=e.data.list},function(e){console.log(e),t.$message.error("角色信息加载失败")})},addFuc:function(){this.$router.push({path:"/admin/settings/editUser/add"})},editOrgInfo:function(e){this.$router.push({path:"/admin/settings/editUser/"+e.userId})},deleteFuc:function(){var e=this,t=[];t=this.multipleSelection.map(function(e){return e.userId});this.$confirm("确认删除已选的用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){g.deleteUser({userIds:t.join(",")}).then(function(t){0===t.data.code?(e.$message.success("删除成功！"),e.$refs.table.clearSelection(),e.getUserList()):e.$message.error(t.data.msg)})}).catch(function(){})},updateStatus:function(e){var t=this,a=[];a=this.multipleSelection.map(function(e){return e.userId});var n=1==e?"确认启用已选的用户？":"确认停用已选的用户";this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){g.updateUserState({userIds:a.join(","),status:e}).then(function(a){0===a.data.code?(t.$message.success(1==e?"启用成功！":"停用成功！"),t.$refs.table.clearSelection(),t.getUserList()):t.$message.error(a.data.msg)})}).catch(function(){})},getUserList:function(){var e=this;g.getUserList({page:this.pageNo,limit:this.pageSize,queryName:this.searchForm.inputs,organizationId:this.searchForm.organizationId,roleId:this.searchForm.roleId}).then(function(t){if(0==t.data.code){var a=t.data.page.list;a&&a.forEach(function(e){e.status=1==e.status?"启用":"停用";var t=new Date(e.updateTime);e.updateTime=w(t,"yyyy-MM-dd hh:mm:ss")}),e.tableData=a,e.total=t.data.page.totalCount}else e.tableData=[],e.total=0})},searchFn:function(){this.pageNo=1,this.getUserList()}},created:function(){var e=this;this.getUserList(),g.getOrgListForSelect().then(function(t){e.companies=t.data.list},function(){})},mounted:function(){}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"g-listpage__style"},[a("div",{staticClass:"action-btn-container.space-inner"},[a("div",{staticClass:"input-group"},[a("el-select",{staticClass:"value-select",staticStyle:{"margin-right":"20px"},attrs:{clearable:"",placeholder:"请选择组织"},on:{change:e.changeOrgan},model:{value:e.searchForm.organizationId,callback:function(t){e.$set(e.searchForm,"organizationId",t)},expression:"searchForm.organizationId"}},e._l(e.companies,function(e){return a("el-option",{key:e.organizationId,attrs:{label:e.organizationName,value:e.organizationId}})})),e._v(" "),a("el-select",{staticClass:"value-select",staticStyle:{"margin-right":"20px"},attrs:{clearable:"",placeholder:"请选择角色"},model:{value:e.searchForm.roleId,callback:function(t){e.$set(e.searchForm,"roleId",t)},expression:"searchForm.roleId"}},e._l(e.roles,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})})),e._v(" "),a("el-input",{staticClass:"right search-btn",attrs:{placeholder:"请输入关键词"},model:{value:e.searchForm.inputs,callback:function(t){e.$set(e.searchForm,"inputs","string"==typeof t?t.trim():t)},expression:"searchForm.inputs"}},[a("i",{staticClass:"iconfont-search el-input__icon",staticStyle:{"vertical-align":"middle"},attrs:{slot:"suffix"},on:{click:e.searchFn},slot:"suffix"})])],1),e._v(" "),a("div",{staticClass:"right-top"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addFuc}},[a("span",[e._v("+ 新增")])]),e._v(" "),a("el-button",{attrs:{disabled:!this.isHaveSelected},on:{click:function(t){e.deleteFuc()}}},[a("i",{staticClass:"iconfont-remove-color",class:{"icon-disable":!this.isHaveSelected}}),e._v(" "),a("span",[e._v("删除")])]),e._v(" "),a("el-button",{attrs:{disabled:!this.isHaveSelected},on:{click:function(t){e.updateStatus(1)}}},[a("i",{staticClass:"iconfont-start-color",class:{"icon-disable":!this.isHaveSelected}}),e._v(" "),a("span",[e._v("启用")])]),e._v(" "),a("el-button",{attrs:{disabled:!this.isHaveSelected},on:{click:function(t){e.updateStatus(0)}}},[a("i",{staticClass:"iconfont-stop-color",class:{"icon-disable":!this.isHaveSelected}}),e._v(" "),a("span",[e._v("停用")])])],1)]),e._v(" "),a("el-table",{ref:"table",staticClass:"g-table",attrs:{data:e.tableData,border:"","row-key":"userId"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"37","reserve-selection":!0}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"realname",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"organizationName",label:"机构名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",label:"角色名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"启用状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateName",label:"更新人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"actions"},[a("button",{on:{click:function(a){e.editOrgInfo(t.row)}}},[e._v("修改")])])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"middle"},attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,40],"page-size":10,layout:"prev, pager, next, jumper,total, sizes",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageNoChange}})],1)},staticRenderFns:[]};var Y=a("vSla")(J,X,!1,function(e){a("DSx3")},"data-v-5a147858",null).exports,W={data:function(){return{isDisabled:!1,rules:E,backPath:"/admin/settings/userManage",formularExpress:[],user:{realname:"",mobile:"",username:"",email:"",remark:"",status:1,roleId:"",organizationId:""},roles:[],userRules:{},existRuleItem:{},userInitAccount:"",companies:[],currentPath:"",timeout:null}},methods:{phoneChange:function(e){"add"===this.$route.params.id&&(this.user.username=e)},quit:function(){this.$router.push(this.backPath)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.doneSaveOrUpdate()})},doneSaveOrUpdate:function(){var e=this,t=$()({},this.user);this.user.userId?g.updateUserInfo(t).then(function(t){0!=t.data.code?e.afterFailSave(t.data.msg):e.afterSuccessSave()},function(t){e.afterFailSave(t)}):(delete t.userId,t.organizationId=this.user.organizationId,t.roleId=this.user.roleId,g.saveUserInfo(t).then(function(t){0!=t.data.code?e.afterFailSave(t.data.msg):e.afterSuccessSave()},function(t){e.afterFailSave(t)}))},changeOrgan:function(e){var t=this;e&&!0===e||(this.user.roleId=""),g.getRoleListByOrgId({organizationId:this.user.organizationId}).then(function(e){t.roles=e.data.list},function(e){console.log(e),t.$message.error("角色信息加载失败")})},afterSuccessSave:function(){this.$message.success("用户保存成功"),"add"==this.getParam()&&this.$message.success("用户默认密码为：111111"),this.$router.push(this.backPath)},getParam:function(){var e=window.location.href;if(-1!=e.indexOf("?")){var t=e.substr(e.indexOf("?")+1);return t.substr(0,t.indexOf("="))}return 0},afterFailSave:function(e){console.log(e),this.$message.error(e)}},created:function(){var e=this;"add"!==this.$route.params.id&&(this.currentPath="editUser"),this.user.userId="add"!==this.$route.params.id?this.$route.params.id:"",g.getOrgListForSelect().then(function(t){e.companies=t.data.list,e.companies.forEach(function(e){e.disabled=1!=e.status})},function(){}),this.user.userId?(this.isDisabled=!0,g.getUserInfoById({userId:this.user.userId}).then(function(t){e.user=t.data.list,e.userInitAccount=e.user.organizationId,e.changeOrgan(!0)},function(e){console.log(e)})):(this.user.organizationId=localStorage.getItem("organizationId"),"admin"!=localStorage.getItem("adminName")&&(this.isDisabled=!0))}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"edit-info"}},[a("div",{staticClass:"edit-info-top"},[a("el-row",[a("div",{staticStyle:{"margin-left":"20px",width:"50px",float:"left"}},[a("span",{staticStyle:{color:"#20a0ff",cursor:"pointer"},on:{click:e.quit}},[e._v("<")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.quit}},[e._v("返回")])],1),e._v(" "),a("div",{staticStyle:{width:"80px",float:"left","margin-left":"30px",color:"#48576a"}},[a("span",[e._v("用户管理")])]),e._v(" "),a("div",{staticStyle:{float:"right","margin-right":"20px"}},[a("el-button",{staticClass:"right",attrs:{size:"small"},on:{click:function(t){e.submitForm("user")}}},[e._v("保存")])],1)])],1),e._v(" "),a("div",{staticClass:"edit-info-bottom",attrs:{id:"edit-user-form"}},[a("el-form",{ref:"user",attrs:{"label-width":"80px",model:e.user}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"姓名",prop:"realname",rules:e.rules.realnameRule}},[a("el-input",{model:{value:e.user.realname,callback:function(t){e.$set(e.user,"realname",t)},expression:"user.realname"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"手 机 号",prop:"mobile",rules:e.rules.phoneRule}},[a("el-input",{on:{input:e.phoneChange},model:{value:e.user.mobile,callback:function(t){e.$set(e.user,"mobile",t)},expression:"user.mobile"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"所属组织",prop:"organizationId",rules:e.rules.organizationRule}},[a("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择"},on:{change:e.changeOrgan},model:{value:e.user.organizationId,callback:function(t){e.$set(e.user,"organizationId",t)},expression:"user.organizationId"}},e._l(e.companies,function(e){return a("el-option",{key:e.organizationId,attrs:{label:e.organizationName,disabled:e.disabled,value:e.organizationId}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"所属角色",prop:"roleId",rules:e.rules.roleIdRule}},[a("el-select",{attrs:{placeholder:"请选择",disabled:!e.user.organizationId,height:"36px"},model:{value:e.user.roleId,callback:function(t){e.$set(e.user,"roleId",t)},expression:"user.roleId"}},e._l(e.roles,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"账号",prop:"username"}},[a("el-input",{attrs:{disabled:"editUser"===e.currentPath},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email",rules:e.rules.emailRule}},[a("el-input",{model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:14,row:30}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{autosize:{minRows:6,maxRows:4}},model:{value:e.user.remark,callback:function(t){e.$set(e.user,"remark",t)},expression:"user.remark"}})],1)],1)],1)],1)],1)])},staticRenderFns:[]};var Z=a("vSla")(W,G,!1,function(e){a("sC7b"),a("PQhq")},"data-v-d8ba976a",null).exports,ee={data:function(){return{menuTreeProps:{label:"name"},selectedKeys:[],menuList:[],isHaveSelected:!1,formLabelWidth:"120px",dialogTitle:"",dialogFormVisible:!1,loading:!1,date:"",total:0,pageSize:10,pageNo:1,tableData:[],title:"新增",arbFormulaInfo:null,dialogForm:{roleName:"",roleId:"",remark:""},searchForm:{inputs:""},multipleSelection:[]}},methods:{indexMethod:function(e){return this.pageSize*(this.pageNo-1)+e+1},handleSelectionChange:function(e){0==e.length?this.isHaveSelected=!1:this.isHaveSelected=!0,this.multipleSelection=e},pageSizeChange:function(e){this.pageSize=e,this.getMenuList()},pageNoChange:function(e){this.pageNo=e,this.getMenuList()},dicSelsctChange:function(e){console.log(e)},offTree:function(){for(var e=0;e<this.$refs.tree.store._getAllNodes().length;e++)this.$refs.tree.store._getAllNodes()[e].expanded=!1},dialogClose:function(){this.selectedKeys=[],this.$refs.tree&&(this.$refs.tree.setCheckedKeys(this.selectedKeys),this.offTree())},addFuc:function(){this.$router.push({path:"/admin/settings/menuEdit/add"})},openEditbox:function(e){this.$router.push({path:"/admin/settings/menuEdit/"+e.menuId})},deleteFuc:function(){var e=this,t=[];t=this.multipleSelection.map(function(e){return e.menuId});this.$confirm("确认删除已选的菜单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){g.deleteMenu({menuIds:t.join(",")}).then(function(t){0===t.data.code?(e.$message.success("删除成功！"),e.$refs.table.clearSelection(),e.getMenuList()):e.$message.error(t.data.msg)})}).catch(function(){})},updateStatus:function(e){var t=this,a=[];a=this.multipleSelection.map(function(e){return e.menuId});var n=1==e?"确认启用已选的菜单？":"确认停用已选的菜单";this.$confirm(n,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){g.updateMenuState({menuIds:a.join(","),status:e}).then(function(a){0===a.data.code?(t.$message.success(1==e?"启用成功！":"停用成功！"),t.$refs.table.clearSelection(),t.getMenuList()):t.$message.error(a.data.msg)})}).catch(function(){})},getMenuList:function(){var e=this;g.getMenuList({page:this.pageNo,limit:this.pageSize,name:this.searchForm.inputs}).then(function(t){if(0==t.data.code){var a=t.data.page.list;t.data.page.list&&a.forEach(function(e){e.status=1==e.status?"启用":"停用",e.isAssignAutho=1==e.isAssignAutho?"已分配":"未分配";var t=new Date(e.updateTime);e.updateTime=w(t,"yyyy-MM-dd hh:mm:ss")}),e.tableData=a,e.total=t.data.page.totalCount}else e.tableData=[],e.total=0})},searchFn:function(){this.pageNo=1,this.getMenuList()}},created:function(){this.getMenuList()},mounted:function(){}},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"g-listpage__style"},[a("div",{staticClass:"action-btn-container.space-inner"},[a("div",{staticClass:"input-group"},[a("el-input",{staticClass:"right search-btn",attrs:{placeholder:"请输入关键词"},model:{value:e.searchForm.inputs,callback:function(t){e.$set(e.searchForm,"inputs","string"==typeof t?t.trim():t)},expression:"searchForm.inputs"}},[a("i",{staticClass:"iconfont-search el-input__icon",staticStyle:{"vertical-align":"middle"},attrs:{slot:"suffix"},on:{click:e.searchFn},slot:"suffix"})])],1),e._v(" "),a("div",{staticClass:"right-top"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addFuc}},[a("span",[e._v("+ 新增")])]),e._v(" "),a("el-button",{attrs:{disabled:!this.isHaveSelected},on:{click:function(t){e.deleteFuc()}}},[a("i",{staticClass:"iconfont-remove-color",class:{"icon-disable":!this.isHaveSelected}}),e._v(" "),a("span",[e._v("删除")])]),e._v(" "),a("el-button",{attrs:{disabled:!this.isHaveSelected},on:{click:function(t){e.updateStatus(1)}}},[a("i",{staticClass:"iconfont-start-color",class:{"icon-disable":!this.isHaveSelected}}),e._v(" "),a("span",[e._v("启用")])]),e._v(" "),a("el-button",{attrs:{disabled:!this.isHaveSelected},on:{click:function(t){e.updateStatus(0)}}},[a("i",{staticClass:"iconfont-stop-color",class:{"icon-disable":!this.isHaveSelected}}),e._v(" "),a("span",[e._v("停用")])])],1)]),e._v(" "),a("el-table",{ref:"table",staticClass:"g-table",attrs:{data:e.tableData,border:"","row-key":"menuId"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"37","reserve-selection":!0}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"菜单名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentName",label:"所属菜单"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"菜单类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url",label:"菜单URL"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"启用状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateBy",label:"更新人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"actions"},[a("button",{on:{click:function(a){e.openEditbox(t.row)}}},[e._v("修改")])])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"middle"},attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,40],"page-size":10,layout:"prev, pager, next, jumper,total, sizes",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageNoChange}})],1)},staticRenderFns:[]};var ae=a("vSla")(ee,te,!1,function(e){a("mOM1")},"data-v-a5135210",null).exports,ne={data:function(){return{rules:E,backPath:"/admin/settings/menuManage",source:{menuId:null,parentId:null,code:"",name:"",url:"",icon:"",type:"",isEdit:"",path:"",status:1},checkStrictly:!0,sourceRules:{},menuList:[],firstLevelMenuList:[],secondLevelMenuList:[],companies:[{name:"一级菜单",type:0},{name:"二级菜单",type:1}],tree:{node:{id:"menuId",parentId:"parentId"},treeData:[],defaultProps:{children:"children",label:"name"},checkedKeys:[],treeRef:"",filter:{radio:!0}},nodesPromise:null,sourcePromise:null}},methods:{quit:function(){this.$router.push(this.backPath)},checkChange:function(e){this.tree.checkedKeys=[e]},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.doneSaveOrUpdate()})},doneSaveOrUpdate:function(){var e=this,t=this.source;this.source.menuId?g.updateMenuInfo(t).then(function(t){0==t.data.code?e.afterSuccessSave(t):e.$message.error(t.data.msg)},function(t){e.afterFailSave(t)}):(delete t.menuId,g.saveMenuInfo(t).then(function(t){0==t.data.code?e.afterSuccessSave(t):e.$message.error(t.data.msg)},function(t){e.afterFailSave(t)}))},afterSuccessSave:function(e){0==e.data.code?this.$message.success("资源保存成功"):this.$message.error(e.data.msg),this.$router.push(this.backPath)},afterFailSave:function(e){console.log(e),this.$message.error("资源保存失败")},selectChange:function(e){}},created:function(){var e=this;if(this.source.menuId="add"!==this.$route.params.id?this.$route.params.id:"",this.source.isEdit="add"===this.$route.params.id?"新增":"编辑",this.source.menuId){var t=this;g.getMenuInfoByMenuId({menuId:this.source.menuId}).then(function(a){t.source=a.data.menu,t.source.isEdit="编辑",t.tree.checkedKeys=[e.source.parentId]},function(e){console.log(e)})}g.getMenuList({page:1,limit:-1}).then(function(t){e.firstLevelMenuList=[],e.secondLevelMenuList=[],t.data.list.forEach(function(t){0==t.type&&e.firstLevelMenuList.push(t),1==t.type&&e.secondLevelMenuList.push(t)}),e.menuList=e.firstLevelMenuList})}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"edit-info"}},[a("div",{staticClass:"edit-info-top"},[a("el-row",[a("div",{staticStyle:{"margin-left":"20px",width:"50px",float:"left"}},[a("span",{staticStyle:{color:"#20a0ff",cursor:"pointer"},on:{click:e.quit}},[e._v("<")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.quit}},[e._v("返回")])],1),e._v(" "),a("div",{staticStyle:{width:"80px",float:"left","margin-left":"30px",color:"#48576a"}},[a("span",[e._v("资源"+e._s(e.source.isEdit))])]),e._v(" "),a("div",{staticStyle:{float:"right","margin-right":"20px"}},[a("el-button",{staticClass:"right",attrs:{size:"small"},on:{click:function(t){e.submitForm("source")}}},[e._v("保存")])],1)])],1),e._v(" "),a("div",{staticClass:"edit-info-bottom",attrs:{id:"edit-sourde-info"}},[a("el-form",{ref:"source",attrs:{"label-width":"80px",model:e.source}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"name",rules:e.rules.menuNameRule}},[a("el-input",{model:{value:e.source.name,callback:function(t){e.$set(e.source,"name",t)},expression:"source.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"菜单类型",prop:"type",rules:e.rules.menuTypeRule}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectChange},model:{value:e.source.type,callback:function(t){e.$set(e.source,"type",t)},expression:"source.type"}},e._l(e.companies,function(e){return a("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},["1"==e.source.type||"2"==e.source.type?a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"上级菜单",prop:"parentId",rules:e.rules.parentIdRule}},[a("el-select",{attrs:{placeholder:"请选择上级菜单"},model:{value:e.source.parentId,callback:function(t){e.$set(e.source,"parentId",t)},expression:"source.parentId"}},e._l(e.menuList,function(e){return a("el-option",{key:e.menuId,attrs:{label:e.name,value:e.menuId}})}))],1)],1):e._e(),e._v(" "),a("el-col",{attrs:{span:7}},[e._e()],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"菜单url",prop:"path"}},[a("el-input",{model:{value:e.source.url,callback:function(t){e.$set(e.source,"url",t)},expression:"source.url"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:14,row:30}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:4}},model:{value:e.source.remark,callback:function(t){e.$set(e.source,"remark",t)},expression:"source.remark"}})],1)],1)],1)],1)],1)])},staticRenderFns:[]};var re=a("vSla")(ne,ie,!1,function(e){a("wMc+"),a("x9KZ")},"data-v-055198f2",null).exports,se={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("iframe",{attrs:{src:"http://192.168.22.122:8086/dsIntegration-manager/druid/sql.html",width:"100%",height:"800"}})])}]};var oe=a("vSla")({data:function(){return{loading:!1,html:""}},mounted:function(){},methods:{}},se,!1,function(e){a("GQ7q"),a("UqrJ")},"data-v-f9e8bf10",null).exports,le={data:function(){return{menuTreeProps:{label:"name"},selectedKeys:[],menuList:[],isHaveSelected:!1,formLabelWidth:"120px",dialogTitle:"",dialogFormVisible:!1,loading:!1,date:"",total:0,pageSize:10,pageNo:1,tableData:[],title:"新增",arbFormulaInfo:null,searchForm:{inputs:""},multipleSelection:[]}},methods:{handleSelectionChange:function(e){0==e.length?this.isHaveSelected=!1:this.isHaveSelected=!0,this.multipleSelection=e},pageSizeChange:function(e){this.pageSize=e,this.getSysLogList()},pageNoChange:function(e){this.pageNo=e,this.getSysLogList()},dicSelsctChange:function(e){console.log(e)},offTree:function(){for(var e=0;e<this.$refs.tree.store._getAllNodes().length;e++)this.$refs.tree.store._getAllNodes()[e].expanded=!1},addFuc:function(){},openEditbox:function(e){this.$router.push({path:"/admin/interface/merchantEdit/"+e.merchantId})},deleteFuc:function(){},updateStatus:function(e){},getSysLogList:function(){var e=this;g.getSysLogList({page:this.pageNo,limit:this.pageSize}).then(function(t){if(0==t.data.code){var a=t.data.page.list;t.data.page.list&&a.forEach(function(e){var t=new Date(e.createDate);e.createDate=w(t,"yyyy-MM-dd hh:mm:ss")}),e.tableData=a,e.total=t.data.page.totalCount}else e.tableData=[],e.total=0})},searchFn:function(){this.pageNo=1,this.getSysLogList()}},created:function(){this.getSysLogList()},mounted:function(){}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"g-listpage__style"},[a("div",{staticClass:"action-btn-container.space-inner"},[e._e(),e._v(" "),e._e()]),e._v(" "),a("el-table",{staticClass:"g-table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"用户操作"}}),e._v(" "),a("el-table-column",{attrs:{prop:"method",label:"请求方法"}}),e._v(" "),a("el-table-column",{attrs:{prop:"params",label:"请求参数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"ip地址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"创建时间"}})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"middle"},attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,40],"page-size":10,layout:"prev, pager, next, jumper,total, sizes",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageNoChange}})],1)},staticRenderFns:[]};var ue=a("vSla")(le,ce,!1,function(e){a("7NKq")},"data-v-4c4c20a0",null).exports,de={data:function(){return{menuTreeProps:{label:"name"},selectedKeys:[],menuList:[],isHaveSelected:!1,formLabelWidth:"120px",dialogTitle:"",dialogFormVisible:!1,loading:!1,date:"",total:0,pageSize:10,pageNo:1,tableData:[],title:"新增",arbFormulaInfo:null,searchForm:{inputs:""},multipleSelection:[]}},methods:{handleSelectionChange:function(e){0==e.length?this.isHaveSelected=!1:this.isHaveSelected=!0,this.multipleSelection=e},pageSizeChange:function(e){this.pageSize=e,this.getMerchantList()},pageNoChange:function(e){this.pageNo=e,this.getMerchantList()},dicSelsctChange:function(e){console.log(e)},offTree:function(){for(var e=0;e<this.$refs.tree.store._getAllNodes().length;e++)this.$refs.tree.store._getAllNodes()[e].expanded=!1},addFuc:function(){},openEditbox:function(e){this.$router.push({path:"/admin/interface/merchantEdit/"+e.merchantId})},deleteFuc:function(){},updateStatus:function(e){},getMerchantList:function(){var e=this;g.getMerchantList({page:this.pageNo,limit:this.pageSize,queryName:this.searchForm.inputs}).then(function(t){if(0==t.data.code){var a=t.data.page.list;t.data.page.list&&a.forEach(function(e){e.status=1==e.status?"启用":"停用",e.isAssignAutho=1==e.isAssignAutho?"启用":"停用";var t=new Date(e.updateTime);e.updateTime=w(t,"yyyy-MM-dd hh:mm:ss")}),e.tableData=a,e.total=t.data.page.totalCount}else e.tableData=[],e.total=0})},searchFn:function(){this.pageNo=1,this.getMerchantList()}},created:function(){this.getMerchantList()},mounted:function(){}},me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"g-listpage__style"},[a("div",{staticClass:"action-btn-container.space-inner"},[a("div",{staticClass:"input-group"},[a("el-input",{staticClass:"right search-btn",attrs:{placeholder:"请输入关键词"},model:{value:e.searchForm.inputs,callback:function(t){e.$set(e.searchForm,"inputs","string"==typeof t?t.trim():t)},expression:"searchForm.inputs"}},[a("i",{staticClass:"iconfont-search el-input__icon",staticStyle:{"vertical-align":"middle"},attrs:{slot:"suffix"},on:{click:e.searchFn},slot:"suffix"})])],1),e._v(" "),e._e()]),e._v(" "),a("el-table",{staticClass:"g-table",attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"37"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"merchantName",label:"商户名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"merchantShortened",label:"商户简称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"merchantContactName",label:"商户对接人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"merchantContactPhone",label:"对接人联系方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"merchantUrl",label:"商户网址"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"启用状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateName",label:"更新人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"actions"},[a("button",{on:{click:function(a){e.openEditbox(t.row)}}},[e._v("修改")])])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"middle"},attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,40],"page-size":10,layout:"prev, pager, next, jumper,total, sizes",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageNoChange}})],1)},staticRenderFns:[]};var pe=a("vSla")(de,me,!1,function(e){a("Z8lE")},"data-v-4f64054a",null).exports,he=a("ymEw"),ge={components:{VDistpicker:a.n(he).a},data:function(){return{rules:E,backPath:"/admin/interface/merchantManage",formularExpress:[],merchant:{merchantId:"",merchantName:"",merchantShortened:"",merchantContactName:null,merchantContactPhone:null,merchantContactQq:"",merchantContactWechat:"",merchantContactEmail:"",merchantUrl:1,merchantAddr:"",status:"",merchantCity:"",province:"",city:"",area:"",merchantTown:""},roles:[],userRules:{},userInitAccount:"",companies:[],currentPath:""}},methods:{selectCity:function(e,t){e.city=t.value,e.merchantCity=e.province+" "+e.city+" "+e.area},selectProvince:function(e,t){e.province=t.value,e.merchantCity=e.province+" "+e.city+" "+e.area},selectArea:function(e,t){e.area=t.value,e.merchantCity=e.province+" "+e.city+" "+e.area},quit:function(){this.$router.push(this.backPath)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.doneSaveOrUpdate()})},doneSaveOrUpdate:function(){var e=this;this.merchant.merchantAddr=this.merchant.merchantCity+","+this.merchant.merchantTown;var t=$()({},this.merchant);this.merchant.merchantId&&g.updateMerchantInfo(t).then(function(t){0!=t.data.code?e.$message.error(t.data.msg):e.afterSuccessSave()},function(t){e.afterFailSave(t)})},afterSuccessSave:function(){this.$message.success("保存成功"),this.$router.push(this.backPath)},afterFailSave:function(e){console.log(e),this.$message.error("保存失败")}},created:function(){var e=this;"add"!==this.$route.params.id&&(this.currentPath="edit"),this.merchant.merchantId="add"!==this.$route.params.id?this.$route.params.id:"",this.merchant.merchantId&&g.getMerchantInfoByMerchantId({merchantId:this.merchant.merchantId}).then(function(t){if(e.merchant=t.data.list,e.merchant.merchantAddr){var a=e.merchant.merchantAddr.split(",");e.merchant.merchantTown=a.splice(1).join(","),e.merchant.province=a[0].split(" ")[0],e.merchant.city=a[0].split(" ")[1],e.merchant.area=a[0].split(" ")[2],e.merchant.merchantCity=a[0]}},function(e){console.log(e)})}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"edit-info"}},[a("div",{staticClass:"edit-info-top"},[a("el-row",[a("div",{staticStyle:{"margin-left":"20px",width:"50px",float:"left"}},[a("span",{staticStyle:{color:"#20a0ff",cursor:"pointer"},on:{click:e.quit}},[e._v("<")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.quit}},[e._v("返回")])],1),e._v(" "),a("div",{staticStyle:{float:"right","margin-right":"20px"}},[a("el-button",{staticClass:"right",attrs:{size:"small"},on:{click:function(t){e.submitForm("merchant")}}},[e._v("保存")])],1)])],1),e._v(" "),a("div",{staticClass:"edit-info-bottom",attrs:{id:"edit-merchant-form"}},[a("el-form",{ref:"merchant",attrs:{"label-width":"100px",model:e.merchant}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商户名称",prop:"merchantName"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.merchant.merchantName,callback:function(t){e.$set(e.merchant,"merchantName",t)},expression:"merchant.merchantName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商户简称",prop:"merchantShortened",rules:e.rules.merchantShortened}},[a("el-input",{model:{value:e.merchant.merchantShortened,callback:function(t){e.$set(e.merchant,"merchantShortened",t)},expression:"merchant.merchantShortened"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"对接人",prop:"merchantContactName",rules:e.rules.merchantContactNameRule}},[a("el-input",{model:{value:e.merchant.merchantContactName,callback:function(t){e.$set(e.merchant,"merchantContactName",t)},expression:"merchant.merchantContactName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"对接人手机",prop:"merchantContactPhone",rules:e.rules.phoneRule}},[a("el-input",{model:{value:e.merchant.merchantContactPhone,callback:function(t){e.$set(e.merchant,"merchantContactPhone",t)},expression:"merchant.merchantContactPhone"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"对接人QQ",prop:"merchantContactQq",rules:e.rules.merchantContactQq}},[a("el-input",{model:{value:e.merchant.merchantContactQq,callback:function(t){e.$set(e.merchant,"merchantContactQq",t)},expression:"merchant.merchantContactQq"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"对接人微信",prop:"merchantContactWechat",rules:e.rules.merchantContactWechat}},[a("el-input",{model:{value:e.merchant.merchantContactWechat,callback:function(t){e.$set(e.merchant,"merchantContactWechat",t)},expression:"merchant.merchantContactWechat"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"对接人邮箱",prop:"merchantContactEmail",rules:e.rules.emailRule}},[a("el-input",{model:{value:e.merchant.merchantContactEmail,callback:function(t){e.$set(e.merchant,"merchantContactEmail",t)},expression:"merchant.merchantContactEmail"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"商户网址",prop:"merchantUrl",rules:e.rules.merchantUrl}},[a("el-input",{model:{value:e.merchant.merchantUrl,callback:function(t){e.$set(e.merchant,"merchantUrl",t)},expression:"merchant.merchantUrl"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"g-address-box"},[a("el-form-item",{attrs:{label:"商户地址",prop:"merchantCity"}},[a("el-input",{staticStyle:{display:"none"},attrs:{type:"hidden"},model:{value:e.merchant.merchantCity,callback:function(t){e.$set(e.merchant,"merchantCity","string"==typeof t?t.trim():t)},expression:"merchant.merchantCity"}}),e._v(" "),a("v-distpicker",{attrs:{province:e.merchant.province,city:e.merchant.city,area:e.merchant.area},on:{province:function(t){e.selectProvince(e.merchant,t)},city:function(t){e.selectCity(e.merchant,t)},area:function(t){e.selectArea(e.merchant,t)}}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"详细地址",prop:"merchantTown",rules:e.rules.addressRule}},[a("el-input",{attrs:{placeholder:"街道、门牌号"},model:{value:e.merchant.merchantTown,callback:function(t){e.$set(e.merchant,"merchantTown","string"==typeof t?t.trim():t)},expression:"merchant.merchantTown"}})],1)],1)],1)],1)],1)])},staticRenderFns:[]};var ve=a("vSla")(ge,fe,!1,function(e){a("EmkW"),a("0OYx")},"data-v-bf4cdf7a",null).exports,be={watch:{filterText2:function(e){this.$refs.tree2.filter(e)}},data:function(){var e;return e={multipleSelection:[],keyWords:"",categoryId:"",merchantId:"",isMoveDisable:!0,node:"",menuVisible:!1,selectedNode:""},R()(e,"categoryId",""),R()(e,"tableData",[]),R()(e,"dialogVisible",!1),R()(e,"typeInputs",""),R()(e,"treeData",[]),R()(e,"merchantList",[]),R()(e,"total",0),R()(e,"pageSize",10),R()(e,"pageNo",1),R()(e,"value",""),R()(e,"filterText",""),R()(e,"filterText2",""),R()(e,"treeProps",{label:"name"}),e},methods:{indexMethod:function(e){return this.pageSize*(this.pageNo-1)+e+1},nodeChange:function(e){this.node=e},watchInfo:function(e){this.$router.push({path:"/admin/interfaceEdit/"+e.interfaceId})},moveData:function(){var e=this;this.dialogVisible=!1;var t=[];t=this.multipleSelection.map(function(e){return e.interfaceId}),g.moveInterface({interfaceIds:t.join(","),categoryId:this.selectedNode.categoryId}).then(function(t){0===t.data.code?(e.$message.success("移动成功！"),e.$refs.table.clearSelection(),e.getInterfaceList()):e.$message.error(t.data.msg)})},pageSizeChange:function(e){this.pageSize=e,this.getInterfaceList()},pageNoChange:function(e){this.pageNo=e,this.getInterfaceList()},handleClose:function(){this.dialogVisible=!1},nodeClick2:function(e){console.log(e),this.selectedNode=e},filterNode2:function(e,t){return!e||-1!==t.label.indexOf(e)},handleSelectionChange:function(e){0==e.length?this.isMoveDisable=!0:this.isMoveDisable=!1,this.multipleSelection=e},refreshList:function(e){this.$refs.table.clearSelection(),this.categoryId=e,this.getInterfaceList()},getcategoryList:function(){var e=this;g.getcategoryList({type:2,name:this.typeInputs}).then(function(t){if(0==t.data.code){if(t.data.list&&t.data.list.length>0){t.data.list;e.treeData=V()(t.data.list,{parentProperty:"parentid",customID:"categoryId"})}}else e.tableData=[],e.total=0})},getMerchantList:function(){var e=this;g.getMerchantList({page:1,limit:-1}).then(function(t){0==t.data.code&&(e.merchantList=t.data.list)})},getInterfaceList:function(){var e=this;0==this.categoryId&&(this.categoryId=""),g.getInterfaceList({pageNum:this.pageNo,pageSize:this.pageSize,categoryId:this.categoryId,merchantId:this.merchantId,key:this.keyWords}).then(function(t){if(0==t.data.code){var a=t.data.pageInfo.list;t.data.pageInfo.list&&a.forEach(function(e){e.status=1==e.status?"启用":"停用";var t=new Date(e.updateTime);e.updateTime=w(t,"yyyy-MM-dd hh:mm:ss")}),e.tableData=a,e.total=t.data.pageInfo.total}else e.tableData=[],e.total=0})}},created:function(){this.getcategoryList(),this.getMerchantList(),this.getInterfaceList()},mounted:function(){}},ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"body-content"},[a("el-dialog",{attrs:{title:"请选择接口类型",visible:e.dialogVisible,width:"400px","before-close":e.handleClose}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText2,callback:function(t){e.filterText2=t},expression:"filterText2"}}),e._v(" "),a("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{"node-key":"categoryId",data:e.treeData,props:e.treeProps,"default-expand-all":"","highlight-current":!0,"expand-on-click-node":!1,"filter-node-method":e.filterNode2},on:{"node-click":e.nodeClick2}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.selectedNode},on:{click:e.moveData}},[e._v("确 定")])],1)],1),e._v(" "),a("common-title",{attrs:{title:"接口管理"}}),e._v(" "),a("div",{staticClass:"grow"},[a("common-tree",{attrs:{type:2},on:{nodeChange:e.nodeChange,refreshList:e.refreshList}}),e._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"right-inner"},[a("div",{staticClass:"btn-group"},[a("span",[a("el-button",{attrs:{type:"info",icon:"el-icon-rank",disabled:e.isMoveDisable},on:{click:function(t){e.dialogVisible=!0}}},[e._v("移动")])],1),e._v(" "),a("span",[a("el-select",{attrs:{placeholder:"请选择",clearable:"true"},model:{value:e.merchantId,callback:function(t){e.merchantId=t},expression:"merchantId"}},e._l(e.merchantList,function(e){return a("el-option",{key:e.merchantId,attrs:{label:e.merchantName,value:e.merchantId}})})),e._v(" "),a("el-input",{staticClass:"formula-form",attrs:{placeholder:"请输入名称/Code"},model:{value:e.keyWords,callback:function(t){e.keyWords=t},expression:"keyWords"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.getInterfaceList}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{ref:"table",staticClass:"g-table",attrs:{data:e.tableData,border:"","row-key":"interfaceId"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"interfaceName",label:"接口名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"interfaceCode",label:"接口Code"}}),e._v(" "),a("el-table-column",{attrs:{prop:"merchantName",label:"支持供应商"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"启用状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"actions"},[a("a",{on:{click:function(a){e.watchInfo(t.row)}}},[e._v("查看")])])]}}])})],1)],1)])],1)],1)},staticRenderFns:[]};var _e=a("vSla")(be,ye,!1,function(e){a("PS0K")},"data-v-31b3b7db",null).exports,Se={data:function(){return{rules:E,backPath:"/admin/interfaceManage",interface:{interfaceId:"",interfaceName:"",interfaceCode:null,status:null,cost:"",cachetime:"",fieldsInfo:[],merchantId:""},merchantList:[],tableBackData:[],tableIntData:[],merchantIdList:[]}},computed:{},methods:{quit:function(){this.$router.push(this.backPath)},getdataTypeName:function(e){return 1===e?"数值型":2===e?"字符型":3===e?"日期型":4===e?"枚举型":void 0},getMerchantList:function(){var e=this;g.getMerchantList({page:1,limit:-1}).then(function(t){0==t.data.code&&(e.merchantList=t.data.list)})}},created:function(){var e=this;"add"!==this.$route.params.id&&(this.currentPath="editUser"),this.interface.interfaceId="add"!==this.$route.params.id?this.$route.params.id:"",this.getMerchantList(),this.interface.interfaceId&&g.getInterfaceDetail({interfaceId:this.interface.interfaceId}).then(function(t){e.interface=t.data.list,e.merchantIdList.push(e.interface.merchantId),e.interface.fieldsInfo.forEach(function(t){t.islist=1==t.islist?"是":"否",t.dataType=e.getdataTypeName(t.dataType),1==t.fieldProperty?e.tableIntData.push(t):e.tableBackData.push(t)})},function(e){console.log(e)})}},Ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"edit-info"}},[a("div",{staticClass:"edit-info-top"},[a("el-row",[a("div",{staticStyle:{"margin-left":"20px",width:"50px",float:"left"}},[a("span",{staticStyle:{color:"#20a0ff",cursor:"pointer"},on:{click:e.quit}},[e._v("<")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.quit}},[e._v("返回")])],1),e._v(" "),a("div",{staticStyle:{width:"80px",float:"left","margin-left":"30px",color:"#48576a"}}),e._v(" "),a("div",{staticStyle:{float:"right","margin-right":"20px"}})])],1),e._v(" "),a("div",{staticClass:"edit-info-bottom",attrs:{id:"edit-user-form"}},[a("el-form",{ref:"interface",attrs:{"label-width":"80px",model:e.interface}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接口Code",prop:"interfaceCode",rules:e.rules.realnameRule}},[a("el-input",{attrs:{disabled:!0},model:{value:e.interface.interfaceCode,callback:function(t){e.$set(e.interface,"interfaceCode",t)},expression:"interface.interfaceCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接口名称",prop:"interfaceName",rules:e.rules.phoneRule}},[a("el-input",{attrs:{disabled:!0},model:{value:e.interface.interfaceName,callback:function(t){e.$set(e.interface,"interfaceName",t)},expression:"interface.interfaceName"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"支持供应商",prop:"merchantIdList",rules:e.rules.phoneRule}},[a("el-checkbox-group",{model:{value:e.merchantIdList,callback:function(t){e.merchantIdList=t},expression:"merchantIdList"}},e._l(e.merchantList,function(t){return a("el-checkbox",{key:t.merchantId,attrs:{value:t.merchantId,label:t.merchantId,disabled:!0}},[e._v(e._s(t.merchantName))])}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"接口入参",rules:e.rules.phoneRule}},[a("el-table",{staticClass:"g-table",attrs:{data:e.tableIntData,border:""}},[a("el-table-column",{attrs:{prop:"fieldName",label:"字段名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fieldCode",label:"字段Code"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataType",label:"值类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"required",label:"必填"}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"接口出参",rules:e.rules.phoneRule}},[a("el-table",{staticClass:"g-table",attrs:{data:e.tableBackData,border:""}},[a("el-table-column",{attrs:{prop:"fieldName",label:"字段名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fieldCode",label:"字段Code"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataType",label:"值类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"islist",label:"数据集"}})],1)],1)],1)],1)],1)],1)])},staticRenderFns:[]};var Ce=a("vSla")(Se,Ie,!1,function(e){a("0ApM"),a("zD9p")},"data-v-15298d6e",null).exports,xe={data:function(){return{total:null,selectValue:"",pageNo:1,pageSize:10,value:"",queryName:"",categoryId:"",selectvalue:"",selectqueryName:"",treeData:[],result:"234444444444444444444444444444",node:"",menuVisible:!1,serviceTestVisible:!1,selectedNode:"",id:88,tableData:[],tableData2:[],tokenKey:"",dialogVisible:!1,testStep:1,options:[{value:"",label:"全部"},{value:"1",label:"单次请求"},{value:"2",label:"多次请求"}],filterText:"",filterText2:"",defaultProps:{children:"children",label:"name"}}},watch:{filterText2:function(e){this.$refs.tree2.filter(e)}},methods:{search:function(){this.selectvalue=this.value,this.selectqueryName=this.queryName,this.getDataServiceList()},changeService:function(e){var t=this,a=[];this.selectValue.map(function(e){a.push(e.serviceId)});var n={status:e,serviceIds:a.join()};g.updateDataServiceState(n).then(function(e){t.$message.success("修改成功"),t.getDataServiceList()})},deleteService:function(e){var t=this;this.$confirm("此操作将删除该条数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=[];t.selectValue.map(function(t){e.push(t.serviceId)});var a={serviceIds:e.join()};g.deleteDataServiceList(a).then(function(e){t.$message.success("删除成功"),t.getDataServiceList()})}).catch(function(){})},indexMethod:function(e){return this.pageSize*(this.pageNo-1)+e+1},getDataServiceList:function(e){var t=this,a={pageNum:this.pageNo,pageSize:this.pageSize,requestType:this.selectvalue,categoryId:this.categoryId,queryName:this.selectqueryName};e||this.$refs.table.clearSelection(),g.getDataServiceList(a).then(function(e){t.tableData=e.data.pageInfo.list,t.total=e.data.pageInfo.total,console.log(e)},function(e){console.log(e)})},pageSizeChange:function(e){this.pageSize=e,this.getDataServiceList(!0)},pageNoChange:function(e){this.pageNo=e,this.getDataServiceList(!0)},goNext:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;var a={};e.tableData2.map(function(e){a[e.fieldCode]=e.input}),g.testDataServiceState(a).then(function(t){console.log(t),e.testStep=2})})},goPrevious:function(){this.testStep=1},nodeChange:function(e){this.categoryId=e,this.getDataServiceList(),this.node=e},handleCloseServiceTest:function(){this.tableData2=[],this.$refs.ruleForm.resetFields(),this.serviceTestVisible=!1},serviceTest:function(e){this.testStep=1,this.serviceTestVisible=!0,this.initPageInfo(e.serviceId,e.serviceCode),console.log(e,"当前字段信息")},getTokenKey:function(){var e=this,t={organizatioId:localStorage.getItem("organizationId")};g.getOrgInfoById(t).then(function(t){e.tokenKey=t.data.list.tokenKey})},initPageInfo:function(e,t){var a=this,n={serviceId:e};g.selectByServiceId(n).then(function(e){console.log(e,"id查找结果"),0===e.data.code?(a.tableData2=e.data.serviceEntity.fieldEntities.filter(function(e){return 1===e.fieldProperty}),a.tableData2.map(function(e){return"serviceCode"===e.fieldCode?a.$set(e,"input",t):"tokenKey"===e.fieldCode?a.$set(e,"input",a.tokenKey):a.$set(e,"input","")}),console.log(a.tableData2)):a.$message.error(e.data.msg)})},onCopy:function(e){this.$message.success("复制成功")},onError:function(e){console.log("无法复制文本！")},getTreeData:function(){var e=this;g.getSelectTypeList({type:3}).then(function(t){e.treeData=V()(t.data.list,{parentProperty:"parentid",customID:"categoryId"}),console.log(e.treeData,"所有服务类型树形结构数据")})},moveData:function(){this.getTreeData(),this.dialogVisible=!0},moveDataTo:function(){var e=this,t=[];this.selectValue.map(function(e){t.push(e.serviceId)});var a={serviceIds:t.join(),categoryId:this.selectedNode.categoryId};g.moveDataServiceList(a).then(function(t){0===t.data.code?(console.log(t,"操作"),e.$message.success("操作成功"),e.dialogVisible=!1,e.getDataServiceList()):e.$message.error(t.data.msg)})},handleClose:function(){this.dialogVisible=!1},nodeClick2:function(e){console.log(e),this.selectedNode=e},filterNode2:function(e,t){return!e||-1!==t.label.indexOf(e)},handleSelectionChange:function(e){this.selectValue=e,console.log(this.selectValue)},editOrgInfo:function(e){this.$router.push({path:"serviceInformationEdit/"+e.serviceId})},addService:function(){this.$router.push({path:"serviceInformationEdit/add"})}},mounted:function(){this.getTokenKey()},computed:{ruleForm:function(){return{tableData:this.tableData2}}},filters:{getTime:function(e){return w(new Date(e),"yyyy-MM-dd hh:mm:ss")},getStatus:function(e){return 0===e?"停用":"启用"},getDataType:function(e){return 1===e?"数值型":2===e?"字符型":3===e?"日期型":4===e?"枚举型":void 0}}},ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-box"},[a("el-dialog",{attrs:{title:"测试数据",visible:e.serviceTestVisible,width:"900px","before-close":e.handleCloseServiceTest},on:{"update:visible":function(t){e.serviceTestVisible=t}}},[[a("el-form",{directives:[{name:"show",rawName:"v-show",value:1===e.testStep,expression:"testStep === 1"}],ref:"ruleForm",attrs:{model:e.ruleForm}},[a("el-table",{staticClass:"slot-table",attrs:{data:e.ruleForm.tableData,border:""}},[a("el-table-column",{attrs:{prop:"fieldName",label:"接口入参名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fieldCode",label:"接口入参Code"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getDataType")(t.row.dataType))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"必填"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",{staticClass:"actions"},["Y"===e.row.required?a("el-checkbox",{attrs:{disabled:"",checked:!0}}):a("el-checkbox",{attrs:{disabled:"",checked:!1}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"接口输入值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"actions"},["tokenKey"===t.row.fieldCode||"serviceCode"===t.row.fieldCode?[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入内容",disabled:""},model:{value:t.row.input,callback:function(a){e.$set(t.row,"input","string"==typeof a?a.trim():a)},expression:"scope.row.input"}})],1)]:["Y"===t.row.required?a("el-form-item",{attrs:{prop:"tableData."+t.$index+".input",rules:{required:!0,message:"此项不能为空",trigger:"blur"}}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.input,callback:function(a){e.$set(t.row,"input","string"==typeof a?a.trim():a)},expression:"scope.row.input"}})],1):a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.row.input,callback:function(a){e.$set(t.row,"input","string"==typeof a?a.trim():a)},expression:"scope.row.input"}})],1)]],2)]}}])})],1)],1),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1===e.testStep,expression:"testStep === 1"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCloseServiceTest}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.goNext}},[e._v("测 试")])],1)],e._v(" "),[a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.testStep,expression:"testStep === 2"}],staticClass:"box-contain"},[a("div",{staticClass:"row"},[a("div",[e._v("测试结果:")]),e._v(" "),a("div",{staticClass:"result"},[e._v("执行成功")])]),e._v(" "),a("div",{staticClass:"row"},[a("div",[e._v("测试结果:")]),e._v(" "),a("div",[a("div",{staticClass:"result-contain"},[e._v("\n              "+e._s(e.result)+"\n            ")]),e._v(" "),a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.result,expression:"result",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"common-href"},[e._v("复制结果")])])])]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:2===e.testStep,expression:"testStep === 2"}],staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.goPrevious}},[e._v("重新测试")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleCloseServiceTest}},[e._v("确定")])],1)]],2),e._v(" "),a("el-dialog",{attrs:{title:"服务类型选择",visible:e.dialogVisible,width:"400px","before-close":e.handleClose}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText2,callback:function(t){e.filterText2=t},expression:"filterText2"}}),e._v(" "),a("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{"node-key":"id",data:e.treeData,props:e.defaultProps,"default-expand-all":"","highlight-current":!0,"expand-on-click-node":!1,"filter-node-method":e.filterNode2},on:{"node-click":e.nodeClick2}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.selectedNode},on:{click:e.moveDataTo}},[e._v("确 定")])],1)],1),e._v(" "),a("common-title",{attrs:{title:"基础服务管理"}}),e._v(" "),a("div",{staticClass:"grow"},[a("common-tree",{attrs:{type:3},on:{nodeChange:e.nodeChange}}),e._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"right-inner"},[a("div",{staticClass:"btn-group"},[a("span",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addService}},[e._v("新增服务")]),e._v(" "),a("el-button",{attrs:{icon:"fa fa-arrows-alt",disabled:0==e.selectValue.length},on:{click:e.moveData}},[e._v("移动")]),e._v(" "),a("el-button",{attrs:{disabled:0==e.selectValue.length},on:{click:e.deleteService}},[a("i",{staticClass:"iconfont-remove-color"}),e._v(" "),a("span",[e._v("删除")])]),e._v(" "),a("el-button",{attrs:{disabled:0==e.selectValue.length},on:{click:function(t){e.changeService(0)}}},[a("i",{staticClass:"iconfont-stop-color"}),e._v(" "),a("span",[e._v("停用")])]),e._v(" "),a("el-button",{attrs:{disabled:0==e.selectValue.length},on:{click:function(t){e.changeService(1)}}},[a("i",{staticClass:"iconfont-start-color"}),e._v(" "),a("span",[e._v("启用")])])],1),e._v(" "),a("span",[a("el-select",{attrs:{placeholder:"请选择请求方式"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-input",{staticClass:"formula-form",attrs:{placeholder:"请输入服务名称/服务代码"},model:{value:e.queryName,callback:function(t){e.queryName=t},expression:"queryName"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{ref:"table",staticClass:"g-table",attrs:{data:e.tableData,border:"","row-key":"serviceId"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceCode",label:"服务Code"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceName",label:"服务名称"}}),e._v(" "),a("el-table-column",{attrs:{label:"启用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getStatus")(t.row.status))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"updateName",label:"更新人"}}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n             "+e._s(e._f("getTime")(t.row.updateTime))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"actions"},[a("a",{on:{click:function(a){e.editOrgInfo(t.row)}}},[e._v("编辑")]),e._v(" "),a("a",{on:{click:function(a){e.serviceTest(t.row)}}},[e._v("服务测试")])])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"middle"},attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,40],"page-size":10,layout:"prev, pager, next, jumper,total, sizes",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageNoChange}})],1)])],1)],1)},staticRenderFns:[]};var Ne=a("vSla")(xe,ke,!1,function(e){a("iieV")},"data-v-3f3712bc",null).exports,we={data:function(){return{time:[],searchtime:"",callSource:"",searchcallSource:"",queryName:"",searchqueryName:"",pageSize:10,pageNo:1,total:null,options:[{label:"全部",value:""},{label:"接口调用",value:"1"},{label:"页面来源",value:"0"}],value:"",value2:"",tableData:[]}},watch:{},methods:{indexMethod:function(e){return this.pageSize*(this.pageNo-1)+e+1},getLastMonth:function(){var e=new Date,t=new Date;t.setTime(t.getTime()-2592e6),this.time=[this.initDate(t),this.initDate(e)],this.searchtime=this.time},initDate:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},pageSizeChange:function(e){this.pageSize=e,this.initState()},pageNoChange:function(e){this.pageNum=e,this.initState()},search:function(){this.searchtime=this.time,this.searchcallSource=this.callSource,this.searchqueryName=this.queryName,this.initState()},initState:function(){var e=this,t={pageNum:this.pageNum,pageSize:this.pageSize,startRequestTime:this.searchtime[0],endRequestTime:this.searchtime[1],callSource:this.searchcallSource,queryName:this.searchqueryName};g.getServiceRedord(t).then(function(t){e.tableData=t.data.pageInfo.list,e.total=t.data.pageInfo.total,console.log(t,777)})},viewDetail:function(e){console.log(e),this.$router.push({path:"serviceInvocation/"+e.id})}},mounted:function(){this.getLastMonth(),this.initState()},filters:{getTime:function(e){return w(new Date(e),"yyyy-MM-dd hh:mm:ss")},getCallSource:function(e){return 0===e?"页面来源":"接口调用"},getStatus:function(e){return"0"===e?"成功":"失败"}}},ze={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-box"},[a("common-title",{attrs:{title:"服务调用日志查询"}}),e._v(" "),a("div",{staticClass:"g-listpage__style flex-inner"},[a("div",{staticClass:"btn-group"},[a("span",[e._v("调用请求时间:")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" "),a("span",[e._v("测试方式：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.callSource,callback:function(t){e.callSource=t},expression:"callSource"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-input",{staticClass:"formula-form",attrs:{placeholder:"请输入服务名称/服务编码/调用机构Key"},model:{value:e.queryName,callback:function(t){e.queryName=t},expression:"queryName"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),a("el-table",{staticClass:"g-table",attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"编号",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{label:"调用请求时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("getTime")(t.row.requestTime))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"调用响应时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("getTime")(t.row.responseTime))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"costTime",label:"接口耗时"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceName",label:"服务名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceCode",label:"服务Code"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tokenKey",label:"调用机构key"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addr",label:"发起主机IP"}}),e._v(" "),a("el-table-column",{attrs:{label:"调用方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("getCallSource")(t.row.callSource))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"调用结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("getStatus")(t.row.status))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"actions"},[a("a",{on:{click:function(a){e.viewDetail(t.row)}}},[e._v("查看明细")])])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"middle"},attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,40],"page-size":10,layout:"prev, pager, next, jumper,total, sizes",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageNoChange}})],1)],1)},staticRenderFns:[]};var Fe=a("vSla")(we,ze,!1,function(e){a("eXJH")},"data-v-e48753e2",null).exports,De={data:function(){return{tableData:[],labelShow:"left",value:"",value2:"",data:[],data2:[],dataServerRequest:"",dataServerResponse:"",integrationApiResults:[],errorInfo:""}},watch:{},mounted:function(){this.initState()},methods:{getStatus:function(e){return"0"===e?"成功":"失败"},initState:function(){var e=this,t={recordId:this.$route.params.id};g.getServiceRedordById(t).then(function(t){var a=t.data.dataServerMessage,n=t.data.dataServerMessage.dataServerRequest;console.log(t,888),e.data=[{label:"服务Code",value:a.serviceCode},{label:"服务名称",value:n.serviceName},{label:"服务地址",value:a.addr},{label:"请求类型",value:a.callType}],e.data2=[{label:"机构名称",value:n.organizationName},{label:"机构Key值",value:a.tokenKey},{label:"执行结果",value:e.getStatus(a.status)},{label:"耗时",value:a.costTime},{label:"服务请求时间",value:f.timestampToTime(a.requestTime)},{label:"服务响应时间",value:f.timestampToTime(a.responseTime)},{label:"请求服务器IP",value:n.addr}],e.integrationApiResults=a.integrationApiResults,e.dataServerRequest=a.dataServerRequest,e.dataServerResponse=a.dataServerResponse,a.dataServerResponse.erroMsg?e.errorInfo=a.dataServerResponse.erroMsg:e.errorInfo="无"})}}},Te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-box"},[a("common-title",{attrs:{title:"服务调用明细"}}),e._v(" "),a("div",{staticClass:"g-listpage__style flex-inner"},[a("p",[e._v("服务基本信息：")]),e._v(" "),a("common-box",{attrs:{data:e.data}}),e._v(" "),a("p",[e._v("请求基本信息：")]),e._v(" "),a("common-box",{attrs:{data:e.data2}}),e._v(" "),a("div",{staticClass:"control"},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.labelShow,callback:function(t){e.labelShow=t},expression:"labelShow"}},[a("el-radio-button",{attrs:{label:"left"}},[e._v("列表展示")]),e._v(" "),a("el-radio-button",{attrs:{label:"right"}},[e._v("代码展示")])],1)],1),e._v(" "),a("div",{staticClass:"container"},["left"===e.labelShow?[a("div",[a("label",[e._v("输入数据:")]),e._v(" "),a("el-table",{attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"serviceName",label:"入参名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceCode",label:"入参编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serverMessageKey",label:"接口输入值"}})],1)],1),e._v(" "),a("div",[a("label",[e._v("结果返回:")]),e._v(" "),a("el-table",{attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"realname",label:"返回字段名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"返回字段编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"realname",label:"返回字段值"}})],1)],1)]:[a("div",[a("label",[e._v("输入数据:")]),e._v(" "),a("div",{staticClass:"box"},[e._v("\n            "+e._s(e.dataServerRequest)+"\n          ")])]),e._v(" "),a("div",[a("label",[e._v("结果返回:")]),e._v(" "),a("div",{staticClass:"box"},[e._v("\n           "+e._s(e.dataServerResponse)+"\n          ")])])]],2),e._v(" "),a("div",{staticClass:"content"},[a("label",[e._v("接口执行明细:")]),e._v(" "),a("el-table",{staticClass:"my",attrs:{data:e.integrationApiResults,border:""}},[a("el-table-column",{attrs:{prop:"interfaceName",label:"接口名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"interfaceCode",label:"接口Code"}}),e._v(" "),a("el-table-column",{attrs:{prop:"message",label:"接口执行结果"}}),e._v(" "),a("el-table-column",{attrs:{prop:"costTime",label:"接口用时"}})],1)],1),e._v(" "),a("div",{staticClass:"content all-width"},[a("label",[e._v("异常服务内容:")]),e._v(" "),a("div",{staticClass:"error"},[e._v(e._s(e.errorInfo))])])],1)],1)},staticRenderFns:[]};var Le=a("vSla")(De,Te,!1,function(e){a("Xlsp")},"data-v-77500b2f",null).exports,$e={data:function(){return{serviceUrl:"",ruleForm:{serviceName:"",serviceCode:"",requestType:"",responseType:""},tableData:[],tableData2:[],tableDataField:[],tableDataField2:[],dialogVisible:!1,value2:"",fieldProperty:"0",dataType:"",key:"",categoryId:"",option:[],options:[{value:"",label:"全部"},{value:1,label:"数值型"},{value:2,label:"字符型"},{value:3,label:"日期型"},{value:4,label:"枚举型"}],pageNo:1,pageSize:10,total:null}},methods:{cancelChose:function(){this.dialogVisible=!1,this.tableDataField2=[],this.$refs.tree.clearSelection()},getServiceUrl:function(){var e=this;g.getDataServiceUrl().then(function(t){0===t.data.code&&(e.serviceUrl=t.data.serviceUrl)})},initPageInfo:function(){var e=this;if("add"!==this.$route.params.id){var t={serviceId:this.$route.params.id};g.selectByServiceId(t).then(function(t){console.log(t,"id查找结果"),0===t.data.code?(e.ruleForm.serviceName=t.data.serviceEntity.serviceName,e.ruleForm.serviceCode=t.data.serviceEntity.serviceCode,e.ruleForm.requestType=t.data.serviceEntity.requestType,e.ruleForm.responseType=t.data.serviceEntity.responseType,e.ruleForm.serviceId=t.data.serviceEntity.serviceId,e.tableData=t.data.serviceEntity.fieldEntities.filter(function(e){return 2===e.fieldProperty}),e.tableData2=t.data.serviceEntity.fieldEntities.filter(function(e){return 1===e.fieldProperty})):e.$message.error(t.data.msg)})}},quit:function(){this.$router.go(-1)},editOrgInfo:function(e){var t=this;this.$confirm("是否删除该字段?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.tableData.splice(t.tableData.indexOf(e),1)}).catch(function(){})},handleSelectionChange:function(e){this.tableDataField2=e},noRepeatPut:function(e,t){var a=this;e.map(function(e){a.hasNoSameId(e.fieldId,t)&&t.push(e)})},hasNoSameId:function(e,t){var a=!0;return t.map(function(t){t.fieldId===e&&(a=!1)}),a},choseField:function(){this.dialogVisible=!1,this.noRepeatPut(this.tableDataField2,this.tableData)},submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(t){var a=$()({},e.ruleForm),n=[];e.tableData instanceof Array&&0!==e.tableData.length?(e.tableData.map(function(e){n.push({fieldId:e.fieldId,required:e.required})}),e.tableData2 instanceof Array&&0!==e.tableData2.length&&e.tableData2.map(function(e){n.push({fieldId:e.fieldId,required:e.required})}),a.fieldEntities=n,"add"===e.$route.params.id?g.addDataServiceList(a).then(function(t){0===t.data.code?(e.$message.success("保存成功"),e.$router.go(-1)):e.$message.error(t.data.msg)}):g.updateDataServiceList(a).then(function(t){0===t.data.code?(e.$message.success("保存成功"),e.$router.go(-1)):e.$message.error(t.data.msg)})):e.$message.error("请选择服务返回字段")}})},getFieldType:function(){var e=this;g.getSelectTypeList({type:1,name:""}).then(function(t){e.option=t.data.list,e.option instanceof Array&&e.option.unshift({name:"全部",categoryId:""})})},getFieldInfoList:function(){var e=this,t={pageNum:this.pageNo,pageSize:this.pageSize,dataType:this.dataType,key:this.key,categoryId:this.categoryId,fieldProperty:2,status:1};g.getFieldList(t).then(function(t){console.log(t,888),e.total=t.data.pageInfo.total,e.tableDataField=t.data.pageInfo.list},function(e){console.log(e)})},pageSizeChange:function(e){this.pageSize=e,this.getFieldInfoList()},pageNoChange:function(e){this.pageNo=e,this.getFieldInfoList()}},watch:{tableData:function(e,t){var a=this,n=[];e.forEach(function(e){n.push(e.fieldId)});var i={fieldIds:n.join()};g.getQueryRequestFields(i).then(function(e){console.log(e),a.tableData2=e.data.fieldEntities})},categoryId:function(e,t){this.pageNo=1,this.pageSize=10,this.total=null,this.getFieldInfoList()},dataType:function(e,t){this.pageNo=1,this.pageSize=10,this.total=null,this.getFieldInfoList()},key:function(e,t){this.pageNo=1,this.pageSize=10,this.total=null,this.getFieldInfoList()}},mounted:function(){this.getFieldInfoList(),this.initPageInfo(),this.getFieldType(),this.getServiceUrl()},filters:{getDataType:function(e){return 1===e?"数值型":2===e?"字符型":3===e?"日期型":4===e?"枚举型":void 0}}},Me={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"edit-info"}},[a("el-dialog",{attrs:{title:"选择返回参数",visible:e.dialogVisible,width:"900px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"content"},[a("div",{staticClass:"head-group"},[a("el-select",{attrs:{placeholder:"请选择字段类型"},model:{value:e.categoryId,callback:function(t){e.categoryId=t},expression:"categoryId"}},e._l(e.option,function(e){return a("el-option",{key:e.categoryId,attrs:{label:e.name,value:e.categoryId}})})),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-input",{staticClass:"formula-form",attrs:{placeholder:"字段代码/字段名称"},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}}),e._v(" "),a("span",[e._v("已选择"+e._s(e.tableDataField2.length)+"个字段")])],1),e._v(" "),a("div",{staticClass:"body"},[a("div",{staticClass:"left"},[a("el-table",{ref:"tree",staticClass:"min-800",attrs:{data:e.tableDataField,border:"","row-key":"fieldId"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0}}),e._v(" "),a("el-table-column",{attrs:{prop:"fieldCode",label:"字段编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fieldName",label:"字段名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"分类"}}),e._v(" "),a("el-table-column",{attrs:{label:"值类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("getDataType")(t.row.dataType))+"\n              ")]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"middle"},attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,40],"page-size":10,layout:"prev, pager, next, jumper,total, sizes",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageNoChange}})],1),e._v(" "),a("div",{staticClass:"right"},[a("el-table",{attrs:{data:e.tableDataField2,border:"","max-height":"800"}},[a("el-table-column",{attrs:{prop:"fieldCode",label:"字段编码",fixed:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"fieldName",label:"字段名称"}})],1)],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelChose}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:0===e.tableDataField2.length},on:{click:e.choseField}},[e._v("确 定")])],1)]),e._v(" "),a("common-title",{attrs:{title:"新增/编辑服务信息"}}),e._v(" "),a("div",{staticClass:"edit-info-top"},[a("el-row",[a("div",{staticClass:"leftBtn"},[a("span",{staticClass:"back",on:{click:e.quit}},[e._v("<")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:e.quit}},[e._v("返回")])],1),e._v(" "),a("div",{staticClass:"rightBtn"},[a("el-button",{staticClass:"right",attrs:{size:"small"},on:{click:e.submitForm}},[e._v("保存")])],1)])],1),e._v(" "),a("div",{staticClass:"edit-info-bottom",attrs:{id:"edit-user-form"}},[a("el-form",{ref:"ruleForm",attrs:{"label-width":"100px",model:e.ruleForm}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"服务Code:",prop:"serviceCode",rules:{required:!0,message:"该项不能为空",trigger:"blur"}}},[a("el-input",{model:{value:e.ruleForm.serviceCode,callback:function(t){e.$set(e.ruleForm,"serviceCode",t)},expression:"ruleForm.serviceCode"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"服务名称:",prop:"serviceName",rules:{required:!0,message:"该项不能为空",trigger:"blur"}}},[a("el-input",{model:{value:e.ruleForm.serviceName,callback:function(t){e.$set(e.ruleForm,"serviceName",t)},expression:"ruleForm.serviceName"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"请求类型:",prop:"requestType",rules:{required:!0,message:"该项不能为空",trigger:"change"}}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.requestType,callback:function(t){e.$set(e.ruleForm,"requestType",t)},expression:"ruleForm.requestType"}},[a("el-option",{attrs:{label:"单次请求",value:1}}),e._v(" "),a("el-option",{attrs:{label:"多次请求",value:2}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"接口地址:"}},[a("el-input",{attrs:{disabled:""},model:{value:e.serviceUrl,callback:function(t){e.serviceUrl=t},expression:"serviceUrl"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"返回类型:",prop:"responseType",rules:{required:!0,message:"该项不能为空",trigger:"change"}}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.responseType,callback:function(t){e.$set(e.ruleForm,"responseType",t)},expression:"ruleForm.responseType"}},[a("el-option",{attrs:{label:"同步",value:1}}),e._v(" "),a("el-option",{attrs:{label:"异步",value:2}})],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"edit-info"},[a("div",{staticClass:"label"},[e._v("\n        服务返回字段:\n      ")]),e._v(" "),a("div",{staticClass:"content"},[a("el-table",{attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"fieldName",label:"字段名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fieldCode",label:"字段Code"}}),e._v(" "),a("el-table-column",{attrs:{label:"值类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getDataType")(t.row.dataType))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据集"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",{staticClass:"actions"},[e.row.islist?a("el-checkbox",{attrs:{disabled:"",checked:!0}}):a("el-checkbox",{attrs:{disabled:"",checked:!1}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"actions"},[a("a",{on:{click:function(a){e.editOrgInfo(t.row)}}},[e._v("删除")])])]}}])})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("+增加接口返回字段")])],1)]),e._v(" "),a("div",{staticClass:"edit-info mt20"},[a("div",{staticClass:"label"},[e._v("\n        服务入参字段:\n      ")]),e._v(" "),a("div",{staticClass:"content"},[a("el-table",{attrs:{data:e.tableData2,border:""}},[a("el-table-column",{attrs:{prop:"fieldName",label:"字段名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fieldCode",label:"字段Code"}}),e._v(" "),a("el-table-column",{attrs:{label:"值类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e._f("getDataType")(t.row.dataType))+"\n            ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"必填"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",{staticClass:"actions"},["Y"===e.row.required?a("el-checkbox",{attrs:{disabled:"",checked:!0}}):a("el-checkbox",{attrs:{disabled:"",checked:!1}})],1)]}}])})],1)],1)])],1)],1)},staticRenderFns:[]};var Re=a("vSla")($e,Me,!1,function(e){a("gKgc")},"data-v-1f3de02c",null).exports,Ee={data:function(){return{key:"",value:"",searchkey:"",searchvalue:"",total:null,selectValue:"",pageNo:1,pageSize:10,node:"",treeData:[],menuVisible:!1,serviceTestVisible:!1,selectedNode:"",selectId:"",id:88,tableData:[],options:[{value:"",label:"全部"},{value:"1",label:"数值型"},{value:"2",label:"字符型"},{value:"3",label:"日期型"},{value:"4",label:"枚举型"}],dialogVisible:!1,testStep:1,filterText:"",filterText2:"",defaultProps:{children:"children",label:"name"}}},watch:{filterText2:function(e){this.$refs.tree2.filter(e)}},methods:{indexMethod:function(e){return this.pageSize*(this.pageNo-1)+e+1},changeService:function(e){var t=this,a=0===e?"停用":"启用";this.$confirm("确认"+a+"已选字段?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a=[];t.selectValue.map(function(e){a.push(e.fieldId)});var n={status:e,fieldIds:a.join()};g.updateFields(n).then(function(e){console.log(e)}),t.$message({type:"success",message:"修改成功!"}),t.getFieldList()}).catch(function(){})},search:function(){this.pageNo=1,this.pageSize=10,this.searchvalue=this.value,this.searchkey=this.key,this.getFieldList()},getFieldList:function(e){var t=this,a={pageNum:this.pageNo,pageSize:this.pageSize,dataType:this.searchvalue,categoryId:this.selectId,fieldProperty:0,key:this.searchkey};e||this.$refs.table.clearSelection(),g.getFieldList(a).then(function(e){console.log(e,"数据结构"),t.tableData=e.data.pageInfo.list||[],t.tableData&&t.tableData.map(function(e){t.$set(e,"dataTypeName",t.getdataTypeName(e.dataType)),t.$set(e,"statusName",t.getstatusName(e.status)),t.$set(e,"updateTime",t.getTime(e.updateTime))}),t.total=e.data.pageInfo.total},function(e){console.log(e)})},getTime:function(e){return w(new Date(e),"yyyy-MM-dd hh:mm:ss")},getdataTypeName:function(e){return 1===e?"数值型":2===e?"字符型":3===e?"日期型":4===e?"枚举型":void 0},getstatusName:function(e){return 1===e?"启用":0===e?"停用":void 0},pageSizeChange:function(e){this.pageSize=e,this.getFieldList(!0)},pageNoChange:function(e){this.pageNo=e,this.getFieldList(!0)},moveData:function(){this.selectedNode="",this.getTreeData(),this.dialogVisible=!0},moveDataTo:function(){var e=this,t=[];this.selectValue.map(function(e){t.push(e.fieldId)});var a={fieldIds:t.join(),categoryId:this.selectedNode.categoryId};g.moveFields(a).then(function(t){0===t.data.code?(e.$message.success("操作成功"),e.dialogVisible=!1,e.getFieldList()):e.$message.error(t.data.msg)})},getTreeData:function(){var e=this;g.getSelectTypeList({type:1}).then(function(t){e.treeData=V()(t.data.list,{parentProperty:"parentid",customID:"categoryId"})})},handleClose:function(){this.dialogVisible=!1},nodeClick:function(e){this.selectedNode=e},filterNode2:function(e,t){return!e||-1!==t.name.indexOf(e)},handleSelectionChange:function(e){this.selectValue=e,console.log(e)},nodeChange:function(e){this.key="",this.value="",this.searchkey="",this.searchvalue="",this.total=null,this.selectValue="",this.pageNo=1,this.pageSize=10,this.selectId=e,this.getFieldList()}},mounted:function(){},computed:{ruleForm:function(){return{tableData:this.tableData}}}},qe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex-box"},[a("el-dialog",{attrs:{title:"字段类型选择",visible:e.dialogVisible,width:"400px","before-close":e.handleClose}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤"},model:{value:e.filterText2,callback:function(t){e.filterText2=t},expression:"filterText2"}}),e._v(" "),a("el-tree",{ref:"tree2",staticClass:"filter-tree",attrs:{"node-key":"categoryId",data:e.treeData,props:e.defaultProps,"default-expand-all":"","highlight-current":!0,"expand-on-click-node":!1,"filter-node-method":e.filterNode2},on:{"node-click":e.nodeClick}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.selectedNode},on:{click:e.moveDataTo}},[e._v("确 定")])],1)],1),e._v(" "),a("common-title",{attrs:{title:"字段管理"}}),e._v(" "),a("div",{staticClass:"grow"},[a("common-tree",{attrs:{type:1},on:{nodeChange:e.nodeChange}}),e._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"right-inner"},[a("p",[e._v(e._s(e.node))]),e._v(" "),a("div",{staticClass:"btn-group"},[a("span",[a("el-button",{attrs:{icon:"fa fa-arrows-alt",disabled:0==e.selectValue.length},on:{click:e.moveData}},[e._v("移动")]),e._v(" "),a("el-button",{attrs:{disabled:0==e.selectValue.length},on:{click:function(t){e.changeService(0)}}},[a("i",{staticClass:"iconfont-stop-color"}),e._v(" "),a("span",[e._v("停用")])]),e._v(" "),a("el-button",{attrs:{disabled:0==e.selectValue.length},on:{click:function(t){e.changeService(1)}}},[a("i",{staticClass:"iconfont-start-color"}),e._v(" "),a("span",[e._v("启用")])])],1),e._v(" "),a("span",[a("el-select",{attrs:{placeholder:"请选择字段类型"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),a("el-input",{staticClass:"formula-form",attrs:{placeholder:"请输入字段名称/字段代码"},model:{value:e.key,callback:function(t){e.key=t},expression:"key"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)]),e._v(" "),a("el-table",{ref:"table",staticClass:"g-table",attrs:{data:e.tableData,border:"","row-key":"fieldId"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection","reserve-selection":!0}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"fieldName",label:"字段名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fieldCode",label:"字段Code"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataTypeName",label:"值类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusName",label:"启动状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}})],1),e._v(" "),a("el-pagination",{staticStyle:{float:"middle"},attrs:{"current-page":e.pageNo,"page-sizes":[10,20,30,40],"page-size":10,layout:"prev, pager, next, jumper,total, sizes",total:e.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageNoChange}})],1)])],1)],1)},staticRenderFns:[]};var Pe=a("vSla")(Ee,qe,!1,function(e){a("0kEM")},"data-v-a55d3242",null).exports;console.log(y),n.default.use(s.a);var Ae=new s.a({routes:[{path:"/",component:y,name:"index",meta:{title:"数据源登录",noRequireAuth:!0,user:!0}},{path:"/userLogin",component:y,name:"userLogin",meta:{title:"数据源登录",noRequireAuth:!0,user:!0}},{path:"/admin",component:x,name:"第三方数据源平台",redirect:"/admin/home",children:[{path:"home",component:N,name:"首页",redirect:"/admin/settings"},{path:"fieldMmanagement",component:Pe,name:"fieldMmanagement"},{path:"dataServiceManage",component:Ne,name:"dataServiceManage"},{path:"serviceCallRecord",component:Fe,name:"serviceCallRecord"},{path:"serviceInvocation/:id",component:Le,name:"serviceInvocation"},{path:"serviceInformationEdit/:id",component:Re,name:"serviceInformationEdit"},{path:"settings",component:S,name:"案件设置",redirect:"settings/userManage",children:[{path:"orgManage",component:T,name:"组织管理"},{path:"orgEdit/:id",component:A,name:"新增组织"},{path:"roleManage",component:H,name:"角色管理"},{path:"roleEdit/:id",component:Q,name:"编辑角色"},{path:"userManage",component:Y,name:"用户管理"},{path:"editUser/:id",component:Z,name:"用户管理"},{path:"menuManage",component:ae,name:"菜单管理"},{path:"menuEdit/:id",component:re,name:"菜单管理"},{path:"sqlWatch",component:oe,name:"SQL监控"},{path:"sysLog",component:ue,name:"系统日志"}]},{path:"interface",component:S,name:"接口管理",redirect:"interface/merchantManage",children:[{path:"merchantManage",component:pe,name:"供应商管理"},{path:"merchantEdit/:id",component:ve,name:"供应商管理"}]},{path:"interfaceManage",component:_e,name:"接口管理"},{path:"interfaceEdit/:id",component:Ce,name:"接口管理"}]}]});Ae.beforeEach(function(e,t,a){a()});var Oe=Ae,Ke=a("KPKd"),He=a.n(Ke),Ue={name:"commonTitle",data:function(){return{}},methods:{},props:{title:{default:"标题",type:String},hasBottom:{default:!1,type:Boolean}},mounted:function(){},components:{},filters:{},computed:{},watch:{}},Ve={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title",class:{mb:this.hasBottom}},[t("p",[this._v(this._s(this.title))])])},staticRenderFns:[]};var Be=a("vSla")(Ue,Ve,!1,function(e){a("E7eo")},"data-v-928fb8dc",null).exports,je=a("3cXf"),Qe=a.n(je),Je={name:"commonTree",data:function(){return{chosedMenu:"",chosedNode:"",chosedNodeId:"",chosedParentId:"",doomObj:{},menuVisible:!1,filterText:"",categoryId:88,data:[],treeData:[],treeProps:{label:"name",children:"children"}}},methods:{getParentId:function(e,t){if(t instanceof Array){var a="";return t.map(function(t){t.categoryId===e&&(a=t.parentid)}),a}},getTreeData:function(){var e=this,t={type:this.type};return new l.a(function(a,n){g.getSelectTypeList(t).then(function(t){console.log(t,"树形结构"),e.treeData=t.data.list;var n=JSON.parse(Qe()(t.data.list));n&&n instanceof Array&&(e.data=V()(n,{parentProperty:"parentid",customID:"categoryId"}));var i=[{categoryId:0,name:e.totalName,children:e.data}];e.data=i,console.log(e.data),a()})})},allowDrop:function(e,t,a){return 0!==t.key},allowDrag:function(e){return 0!==e.key},handleDragEnd:function(e,t,a,n){var i=this,r="";if("none"!==a){t&&(r="inner"===a?t.key:this.getParentId(t.key,this.treeData));var s={categoryId:e.key,toCategoryId:r};g.moveSelectTypeList(s).then(function(e){0===e.data.code?i.$message.success("移动成功！"):i.$message.error(e.data.msg),i.getTreeData().then(function(){i.$refs.tree.setCurrentKey(i.chosedNodeId)})})}},hideMenu:function(e){e.preventDefault()},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},nodeClick:function(e){this.chosedNodeId=e.categoryId,this.menuVisible=!1,2==this.type&&this.$emit("refreshList",e.categoryId)},nodeChange:function(e,t){},rihgtClick:function(e,t,a,n){var i=this;this.chosedNodeId=t.categoryId,this.chosedParentId=t.parentid,this.$nextTick(function(){i.$refs.tree.setCurrentKey(i.chosedNodeId)}),this.menuVisible=!0;var r=document.querySelector("#menu");r.style.left=e.clientX-this.doomObj.x+"px",r.style.top=e.clientY-this.doomObj.y+"px",this.chosedMenu=[e,t,a,n]},addTreeNode:function(e){var t=this;this.$prompt("请输入类型名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"名称不能为空"}).then(function(e){var a={name:e.value,type:t.type,parentId:0===t.chosedNodeId?"":t.chosedNodeId};g.addSelectTypeList(a).then(function(e){0==e.data.code?(t.$message.success("保存成功！"),t.getTreeData().then(function(){t.$nextTick(function(){t.$refs.tree.setCurrentKey(t.chosedNodeId)})})):t.$message.error(e.data.msg)})}).catch(function(){})},menuRemove:function(){var e=this;0!==this.chosedNodeId&&this.$confirm("确定要删除该节点吗？","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={categoryIds:e.chosedNodeId};g.deleteSelectTypeList(t).then(function(t){0===t.data.code?(console.log(t),e.$message.success("删除成功！"),e.chosedNodeId=e.chosedParentId,e.getTreeData().then(function(){e.$nextTick(function(){e.$refs.tree.setCurrentKey(e.chosedNodeId)})})):e.$message.error(t.data.msg)})}).catch(function(){})},menuChange:function(){var e=this;0!==this.chosedNodeId&&this.$prompt("请修改节点名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"名称不能为空",inputValue:this.chosedMenu[1].name}).then(function(t){var a={name:t.value,categoryId:e.chosedNodeId,type:e.type};g.updateSelectTypeList(a).then(function(t){0===t.data.code?(e.$message.success("修改成功"),e.getTreeData().then(function(){e.$nextTick(function(){e.$refs.tree.setCurrentKey(e.chosedNodeId)})})):e.$message.error(t.data.msg),console.log(t)})}).catch(function(){})},renderContent:function(e,t){var a=t.node;t.data,t.store;return e("span",{class:"custom-tree-node"},[e("i",{class:"fa fa-align-justify my-icon"}),e("span",[a.label])])}},props:{type:{default:1}},mounted:function(){var e=this;this.getTreeData().then(function(){e.chosedNodeId=0,e.$refs.tree.setCurrentKey(e.chosedNodeId)}),this.$nextTick(function(){var t=document.querySelector(".tree-container");e.doomObj=t.getBoundingClientRect()});var t=this;document.body.onclick=function(){t.menuVisible=!1}},components:{},filters:{},computed:{totalName:function(){return 1===this.type?"字段分类":2===this.type?"接口分类":3===this.type?"服务分类":"total"}},watch:{filterText:function(e){this.$refs.tree.filter(e)},chosedNodeId:function(e,t){this.$emit("nodeChange",0===e?"":e)}}},Xe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree-container"},[a("ul",{directives:[{name:"show",rawName:"v-show",value:e.menuVisible,expression:"menuVisible"}],attrs:{id:"menu"},on:{click:e.hideMenu}},[a("li",{class:{"not-allowed":e.chosedMenu[2]&&e.chosedMenu[2].level>=4},on:{click:e.addTreeNode}},[e._v("创建子类型")]),e._v(" "),a("li",{class:{"not-allowed":0===e.chosedNodeId},on:{click:e.menuRemove}},[e._v("删除该节点")]),e._v(" "),a("li",{class:{"not-allowed":0===e.chosedNodeId},on:{click:e.menuChange}},[e._v("修改节点名称")])]),e._v(" "),a("div",{staticClass:"box"},[a("div",{staticClass:"inner"},[a("el-input",{attrs:{placeholder:"输入关键字"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",attrs:{data:e.data,"node-key":"categoryId",props:e.treeProps,"default-expand-all":"","highlight-current":!0,"expand-on-click-node":!1,"allow-drop":e.allowDrop,"allow-drag":e.allowDrag,"filter-node-method":e.filterNode,"render-content":e.renderContent},on:{"node-drag-end":e.handleDragEnd,"node-contextmenu":e.rihgtClick,"node-click":e.nodeClick,"current-change":e.nodeChange}})],1)])])},staticRenderFns:[]};var Ye=a("vSla")(Je,Xe,!1,function(e){a("qiop")},"data-v-8b1acf42",null).exports,We={name:"commonBox",data:function(){return{}},methods:{},props:{data:{default:[{label:"标题",value:"内容"}],type:Array},isLoading:{default:!1,type:Boolean}},mounted:function(){},components:{},filters:{},computed:{},watch:{}},Ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticClass:"box"},[e._l(e.data,function(t,n){return[a("el-col",{key:n,staticClass:"inner",attrs:{span:t.span||6}},[a("label",{staticClass:"label"},[e._v(e._s(t.label)+":")]),e._v(" "),a("div",{staticClass:"value"},[e._v(e._s(t.value))])])]})],2)},staticRenderFns:[]};var Ze=[Be,Ye,a("vSla")(We,Ge,!1,function(e){a("LsE4")},"data-v-2da6fe8b",null).exports],et=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ze.map(function(t){e.component(t.name,t)})};a("dRIH"),a("HBSQ"),a("3wY5"),a("BcSr"),a("mkIY");n.default.use(et),n.default.use(He.a),n.default.use(m.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:Oe,template:"<App/>",components:{App:r}})},PQhq:function(e,t){},PS0K:function(e,t){},UqrJ:function(e,t){},VhOZ:function(e,t){},Wh4y:function(e,t){},Xlsp:function(e,t){},YZ26:function(e,t){},Z8lE:function(e,t){},"c/B/":function(e,t){},dRIH:function(e,t){},eXJH:function(e,t){},"fLt+":function(e,t){},gKgc:function(e,t){},iieV:function(e,t){},mOM1:function(e,t){},mkIY:function(e,t){},qiop:function(e,t){},sC7b:function(e,t){},"wMc+":function(e,t){},x9KZ:function(e,t){},xOIx:function(e,t){},zD9p:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c7c7e5d61083122483b1.js.map